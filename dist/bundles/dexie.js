System.registerDynamic("npm:jspm-nodelibs-process@0.2.0.json",[],!0,function(){return{main:"./process.js"}}),System.registerDynamic("npm:jspm-nodelibs-process@0.2.0/process.js",["@system-env"],!0,function(t,r,d){function u(){I=!1,A.length?C=A.concat(C):E=-1,C.length&&h()}function h(){if(!I){var S=setTimeout(u);I=!0;for(var K=C.length;K;){for(A=C,C=[];++E<K;)A&&A[E].run();E=-1,K=C.length}A=null,I=!1,clearTimeout(S)}}function g(S,K){this.fun=S,this.array=K}function y(){}var k=this||self,P=t("@system-env").production,D=d.exports={},C=[],I=!1,A,E=-1;D.nextTick=function(S){var K=Array(arguments.length-1);if(1<arguments.length)for(var O=1;O<arguments.length;O++)K[O-1]=arguments[O];C.push(new g(S,K)),1!==C.length||I||setTimeout(h,0)},g.prototype.run=function(){this.fun.apply(null,this.array)},D.title="browser",D.browser=!0,D.env={NODE_ENV:P?"production":"development"},D.argv=[],D.version="",D.versions={},D.on=y,D.addListener=y,D.once=y,D.off=y,D.removeListener=y,D.removeAllListeners=y,D.emit=y,D.binding=function(){throw new Error("process.binding is not supported")},D.cwd=function(){return"/"},D.chdir=function(){throw new Error("process.chdir is not supported")},D.umask=function(){return 0}}),System.registerDynamic("npm:dexie@1.5.1.json",[],!0,function(){return{main:"dist/dexie.js",format:"cjs",meta:{"*":{globals:{process:"process"}},"*.json":{format:"json"}}}}),System.registerDynamic("npm:dexie@1.5.1/dist/dexie.js",["process"],!0,function(t,r,d){var u=t("process"),h=this||self;(function(y,k){"object"==typeof r&&"undefined"!=typeof d?d.exports=k():y.Dexie=k()})(r,function(){"use strict";function y(Xn,Zn){return"object"==typeof Zn?(Ge(Zn).forEach(function($n){Xn[$n]=Zn[$n]}),Xn):Xn}function k(Xn,Zn){return Ze.call(Xn,Zn)}function w(Xn,Zn){"function"==typeof Zn&&(Zn=Zn(Xe(Xn))),Ge(Zn).forEach(function($n){P(Xn,$n,Zn[$n])})}function P(Xn,Zn,$n,Jn){Object.defineProperty(Xn,Zn,y($n&&k($n,"get")&&"function"==typeof $n.get?{get:$n.get,set:$n.set,configurable:!0}:{value:$n,configurable:!0,writable:!0},Jn))}function D(Xn){return{from:function(Zn){return Xn.prototype=Object.create(Zn.prototype),P(Xn.prototype,"constructor",Xn),{extend:w.bind(null,Xn.prototype)}}}}function C(Xn,Zn){var Jn,$n=$e(Xn,Zn);return $n||(Jn=Xe(Xn))&&C(Jn,Zn)}function I(Xn,Zn,$n){return Je.call(Xn,Zn,$n)}function A(Xn,Zn){return Zn(Xn)}function E(Xn){var Zn=setTimeout(Xn,1e3);clearTimeout(Zn)}function S(Xn){if(!Xn)throw new Error("Assertion Failed")}function K(Xn){Ye.setImmediate?setImmediate(Xn):setTimeout(Xn,0)}function O(Xn,Zn){return Xn.reduce(function($n,Jn,et){var nt=Zn(Jn,et);return nt&&($n[nt[0]]=nt[1]),$n},{})}function N(Xn,Zn){return function(){try{Xn.apply(this,arguments)}catch($n){Zn($n)}}}function B(Xn,Zn,$n){try{Xn.apply(null,$n)}catch(Jn){Zn&&Zn(Jn)}}function M(Xn,Zn){if(k(Xn,Zn))return Xn[Zn];if(!Zn)return Xn;if("string"!=typeof Zn){for(var nt,$n=[],Jn=0,et=Zn.length;Jn<et;++Jn)nt=M(Xn,Zn[Jn]),$n.push(nt);return $n}var tt=Zn.indexOf(".");if(-1!==tt){var rt=Xn[Zn.substr(0,tt)];return void 0===rt?void 0:M(rt,Zn.substr(tt+1))}}function q(Xn,Zn,$n){if(Xn&&void 0!==Zn&&!("isFrozen"in Object&&Object.isFrozen(Xn)))if("string"!=typeof Zn&&"length"in Zn){S("string"!=typeof $n&&"length"in $n);for(var Jn=0,et=Zn.length;Jn<et;++Jn)q(Xn,Zn[Jn],$n[Jn])}else{var nt=Zn.indexOf(".");if(-1!==nt){var tt=Zn.substr(0,nt),rt=Zn.substr(nt+1);if(""===rt)void 0===$n?delete Xn[tt]:Xn[tt]=$n;else{var at=Xn[tt];at||(at=Xn[tt]={}),q(at,rt,$n)}}else void 0===$n?delete Xn[Zn]:Xn[Zn]=$n}}function R(Xn){var Zn={};for(var $n in Xn)k(Xn,$n)&&(Zn[$n]=Xn[$n]);return Zn}function U(Xn){if(!Xn||"object"!=typeof Xn)return Xn;var Zn;if(Qe(Xn)){Zn=[];for(var $n=0,Jn=Xn.length;$n<Jn;++$n)Zn.push(U(Xn[$n]))}else if(Xn instanceof Date)Zn=new Date,Zn.setTime(Xn.getTime());else for(var et in Zn=Xn.constructor?Object.create(Xn.constructor.prototype):{},Xn)k(Xn,et)&&(Zn[et]=U(Xn[et]));return Zn}function V(Xn,Zn,$n,Jn){return $n=$n||{},Jn=Jn||"",Ge(Xn).forEach(function(et){if(!k(Zn,et))$n[Jn+et]=void 0;else{var nt=Xn[et],tt=Zn[et];"object"==typeof nt&&"object"==typeof tt&&nt&&tt&&nt.constructor===tt.constructor?V(nt,tt,$n,Jn+et+"."):nt!==tt&&($n[Jn+et]=Zn[et])}}),Ge(Zn).forEach(function(et){k(Xn,et)||($n[Jn+et]=Zn[et])}),$n}function L(Xn){var Zn,$n,Jn,et;if(1===arguments.length){if(Qe(Xn))return Xn.slice();if(this===tn&&"string"==typeof Xn)return[Xn];if(et=nn(Xn)){for($n=[];Jn=et.next(),!Jn.done;)$n.push(Jn.value);return $n}if(null==Xn)return[Xn];if(Zn=Xn.length,"number"==typeof Zn){for($n=Array(Zn);Zn--;)$n[Zn]=Xn[Zn];return $n}return[Xn]}for(Zn=arguments.length,$n=Array(Zn);Zn--;)$n[Zn]=arguments[Zn];return $n}function z(Xn){return rn.apply([],Xn)}function W(){}function H(Xn){return Xn}function G(Xn,Zn){return null==Xn||Xn===H?Zn:function($n){return Zn(Xn($n))}}function Q(Xn,Zn){return function(){Xn.apply(this,arguments),Zn.apply(this,arguments)}}function Y(Xn,Zn){return Xn===W?Zn:function(){var $n=Xn.apply(this,arguments);void 0!==$n&&(arguments[0]=$n);var Jn=this.onsuccess,et=this.onerror;this.onsuccess=null,this.onerror=null;var nt=Zn.apply(this,arguments);return Jn&&(this.onsuccess=this.onsuccess?Q(Jn,this.onsuccess):Jn),et&&(this.onerror=this.onerror?Q(et,this.onerror):et),void 0===nt?$n:nt}}function X(Xn,Zn){return Xn===W?Zn:function(){Xn.apply(this,arguments);var $n=this.onsuccess,Jn=this.onerror;this.onsuccess=this.onerror=null,Zn.apply(this,arguments),$n&&(this.onsuccess=this.onsuccess?Q($n,this.onsuccess):$n),Jn&&(this.onerror=this.onerror?Q(Jn,this.onerror):Jn)}}function Z(Xn,Zn){return Xn===W?Zn:function($n){var Jn=Xn.apply(this,arguments);y($n,Jn);var et=this.onsuccess,nt=this.onerror;this.onsuccess=null,this.onerror=null;var tt=Zn.apply(this,arguments);return et&&(this.onsuccess=this.onsuccess?Q(et,this.onsuccess):et),nt&&(this.onerror=this.onerror?Q(nt,this.onerror):nt),void 0===Jn?void 0===tt?void 0:tt:y(Jn,tt)}}function $(Xn,Zn){return Xn===W?Zn:function(){return!1!==Zn.apply(this,arguments)&&Xn.apply(this,arguments)}}function J(Xn,Zn){return Xn===W?Zn:function(){var $n=Xn.apply(this,arguments);if($n&&"function"==typeof $n.then){for(var Jn=this,et=arguments.length,nt=Array(et);et--;)nt[et]=arguments[et];return $n.then(function(){return Zn.apply(Jn,nt)})}return Zn.apply(this,arguments)}}function ee(Xn,Zn){an=Xn,on=Zn}function ne(){if(sn)try{throw ne.arguments,new Error}catch(Xn){return Xn}return new Error}function te(Xn,Zn){var $n=Xn.stack;return $n?(Zn=Zn||0,0===$n.indexOf(Xn.name)&&(Zn+=(Xn.name+Xn.message).split("\n").length),$n.split("\n").slice(Zn).filter(on).map(function(Jn){return"\n"+Jn}).join("")):""}function re(Xn,Zn){return function(){return console.warn(Xn+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+te(ne(),1)),Zn.apply(this,arguments)}}function ae(Xn,Zn){this._e=ne(),this.name=Xn,this.message=Zn}function oe(Xn,Zn){return Xn+". Errors: "+Zn.map(function($n){return $n.toString()}).filter(function($n,Jn,et){return et.indexOf($n)===Jn}).join("\n")}function se(Xn,Zn,$n,Jn){this._e=ne(),this.failures=Zn,this.failedKeys=Jn,this.successCount=$n}function ie(Xn,Zn){this._e=ne(),this.name="BulkError",this.failures=Zn,this.message=oe(Xn,Zn)}function de(Xn){function Zn(rt,at,ot){if("object"==typeof rt)return $n(rt);at||(at=$),ot||(ot=W);var st={subscribers:[],fire:ot,subscribe:function(lt){-1===st.subscribers.indexOf(lt)&&(st.subscribers.push(lt),st.fire=at(st.fire,lt))},unsubscribe:function(lt){st.subscribers=st.subscribers.filter(function(dt){return dt!==lt}),st.fire=st.subscribers.reduce(at,ot)}};return Jn[rt]=et[rt]=st,st}function $n(rt){Ge(rt).forEach(function(at){var ot=rt[at];if(Qe(ot))Zn(at,rt[at][0],rt[at][1]);else if("asap"===ot)var st=Zn(at,H,function(){for(var dt=arguments.length,ct=Array(dt);dt--;)ct[dt]=arguments[dt];st.subscribers.forEach(function(ut){K(function(){ut.apply(null,ct)})})});else throw new mn.InvalidArgument("Invalid event config")})}var Jn={},et=function(rt,at){if(at){for(var ot=arguments.length,st=Array(ot-1);--ot;)st[ot-1]=arguments[ot];return Jn[rt].subscribe.apply(null,st),Xn}return"string"==typeof rt?Jn[rt]:void 0};et.addEventType=Zn;for(var nt=1,tt=arguments.length;nt<tt;++nt)Zn(arguments[nt]);return et}function ce(Xn){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=W,this._lib=!1;var Zn=this._PSD=Sn;if(an&&(this._stackHolder=ne(),this._prev=null,this._numPrev=0,ye(this,In)),"function"!=typeof Xn){if(Xn!==yn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&pe(this,this._value))}this._state=null,this._value=null,++Zn.ref,he(this,Xn)}function ue(Xn,Zn,$n,Jn){this.onFulfilled="function"==typeof Xn?Xn:null,this.onRejected="function"==typeof Zn?Zn:null,this.resolve=$n,this.reject=Jn,this.psd=Sn}function he(Xn,Zn){try{Zn(function($n){if(null===Xn._state){if($n===Xn)throw new TypeError("A promise cannot be resolved with itself.");var Jn=Xn._lib&&ve();$n&&"function"==typeof $n.then?he(Xn,function(et,nt){$n instanceof ce?$n._then(et,nt):$n.then(et,nt)}):(Xn._state=!0,Xn._value=$n,fe(Xn)),Jn&&ke()}},pe.bind(null,Xn))}catch($n){pe(Xn,$n)}}function pe(Xn,Zn){if(Cn.push(Zn),null===Xn._state){var $n=Xn._lib&&ve();Zn=An(Zn),Xn._state=!1,Xn._value=Zn,an&&null!==Zn&&"object"==typeof Zn&&!Zn._promise&&B(function(){var Jn=C(Zn,"stack");Zn._promise=Xn,P(Zn,"stack",{get:function(){return kn?Jn&&(Jn.get?Jn.get.apply(Zn):Jn.value):Xn.stack}})}),Pe(Xn),fe(Xn),$n&&ke()}}function fe(Xn){var Zn=Xn._listeners;Xn._listeners=[];for(var $n=0,Jn=Zn.length;$n<Jn;++$n)me(Xn,Zn[$n]);var et=Xn._PSD;--et.ref||et.finalize(),0===On&&(++On,wn(function(){0==--On&&xe()},[]))}function me(Xn,Zn){if(null===Xn._state)return void Xn._listeners.push(Zn);var $n=Xn._state?Zn.onFulfilled:Zn.onRejected;if(null===$n)return(Xn._state?Zn.resolve:Zn.reject)(Xn._value);var Jn=Zn.psd;++Jn.ref,++On,wn(ge,[$n,Xn,Zn])}function ge(Xn,Zn,$n){var Jn=Sn,et=$n.psd;try{et!==Jn&&(Sn=et),In=Zn;var tt,nt=Zn._value;Zn._state?tt=Xn(nt):(Cn.length&&(Cn=[]),tt=Xn(nt),-1===Cn.indexOf(nt)&&De(Zn)),$n.resolve(tt)}catch(rt){$n.reject(rt)}finally{et!==Jn&&(Sn=Jn),In=null,0==--On&&xe(),--et.ref||et.finalize()}}function be(Xn,Zn,$n){if(Zn.length===$n)return Zn;var Jn="";if(!1===Xn._state){var nt,tt,et=Xn._value;null==et?(nt=et,tt=""):(nt=et.name||"Error",tt=et.message||et,Jn=te(et,0)),Zn.push(nt+(tt?": "+tt:"")+Jn)}return an&&(Jn=te(Xn._stackHolder,2),Jn&&-1===Zn.indexOf(Jn)&&Zn.push(Jn),Xn._prev&&be(Xn._prev,Zn,$n)),Zn}function ye(Xn,Zn){var $n=Zn?Zn._numPrev+1:0;$n<_n&&(Xn._prev=Zn,Xn._numPrev=$n)}function _e(){ve()&&ke()}function ve(){var Xn=Pn;return Pn=!1,Dn=!1,Xn}function ke(){var Xn,Zn,$n;do for(;0<Kn.length;)for(Xn=Kn,Kn=[],$n=Xn.length,Zn=0;Zn<$n;++Zn){var Jn=Xn[Zn];Jn[0].apply(null,Jn[1])}while(0<Kn.length);Pn=!0,Dn=!0}function xe(){var Xn=jn;jn=[],Xn.forEach(function(Jn){Jn._PSD.onunhandled.call(null,Jn._value,Jn)});for(var Zn=Nn.slice(0),$n=Zn.length;$n;)Zn[--$n]()}function we(Xn){function Zn(){Xn(),Nn.splice(Nn.indexOf(Zn),1)}Nn.push(Zn),++On,wn(function(){0==--On&&xe()},[])}function Pe(Xn){jn.some(function(Zn){return Zn._value===Xn._value})||jn.push(Xn)}function De(Xn){for(var Zn=jn.length;Zn;)if(jn[--Zn]._value===Xn._value)return void jn.splice(Zn,1)}function Ce(Xn){return new ce(yn,!1,Xn)}function Ie(Xn,Zn){var $n=Sn;return function(){var Jn=ve(),et=Sn;try{return et!==$n&&(Sn=$n),Xn.apply(this,arguments)}catch(nt){Zn&&Zn(nt)}finally{et!==$n&&(Sn=et),Jn&&ke()}}}function Ae(Xn,Zn,$n,Jn){var et=Sn,nt=Object.create(et);nt.parent=et,nt.ref=0,nt.global=!1,++et.ref,nt.finalize=function(){--this.parent.ref||this.parent.finalize()};var tt=Ee(nt,Xn,Zn,$n,Jn);return 0===nt.ref&&nt.finalize(),tt}function Ee(Xn,Zn,$n,Jn,et){var nt=Sn;try{return Xn!==nt&&(Sn=Xn),Zn($n,Jn,et)}finally{Xn!==nt&&(Sn=nt)}}function Se(Xn,Zn){var $n;try{$n=Zn.onuncatched(Xn)}catch(nt){}if(!1!==$n)try{var Jn,et={promise:Zn,reason:Xn};if(Ye.document&&document.createEvent?(Jn=document.createEvent("Event"),Jn.initEvent(Bn,!0,!0),y(Jn,et)):Ye.CustomEvent&&(Jn=new CustomEvent(Bn,{detail:et}),y(Jn,et)),Jn&&Ye.dispatchEvent&&(dispatchEvent(Jn),!Ye.PromiseRejectionEvent&&Ye.onunhandledrejection))try{Ye.onunhandledrejection(Jn)}catch(nt){}Jn.defaultPrevented||ce.on.error.fire(Xn,Zn)}catch(nt){}}function Ke(Xn,Zn){var $n=ce.reject(Xn);return Zn?$n.uncaught(Zn):$n}function Oe(Xn,Zn){function Jn(or){this._cfg={version:or,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function et(or,sr,ir){var lr=Zt._createTransaction(Xt,Lt,Ut);lr.create(sr),lr._completion.catch(ir);var dr=lr._reject.bind(lr);Ae(function(){Sn.trans=lr,0===or?(Ge(Ut).forEach(function(cr){rt(sr,cr,Ut[cr].primKey,Ut[cr].indexes)}),ce.follow(function(){return Zt.on.populate.fire(lr)}).catch(dr)):nt(or,lr,sr).catch(dr)})}function nt(or,sr,ir){function lr(){return dr.length?ce.resolve(dr.shift()(sr.idbtrans)).then(lr):ce.resolve()}var dr=[],cr=Vt.filter(function(pr){return pr._cfg.version===or})[0];if(!cr)throw new mn.Upgrade("Dexie specification of currently installed DB version is missing");Ut=Zt._dbSchema=cr._cfg.dbschema;var ur=!1,hr=Vt.filter(function(pr){return pr._cfg.version>or});return hr.forEach(function(pr){dr.push(function(){var fr=Ut,mr=pr._cfg.dbschema;Ot(fr,ir),Ot(mr,ir),Ut=Zt._dbSchema=mr;var gr=tt(fr,mr);if(gr.add.forEach(function(br){rt(ir,br[0],br[1].primKey,br[1].indexes)}),gr.change.forEach(function(br){if(br.recreate)throw new mn.Upgrade("Not yet support for changing primary key");else{var yr=ir.objectStore(br.name);br.add.forEach(function(_r){st(yr,_r)}),br.change.forEach(function(_r){yr.deleteIndex(_r.name),st(yr,_r)}),br.del.forEach(function(_r){yr.deleteIndex(_r)})}}),pr._cfg.contentUpgrade)return ur=!0,ce.follow(function(){pr._cfg.contentUpgrade(sr)})}),dr.push(function(fr){if(!ur||!zn){var mr=pr._cfg.dbschema;ot(mr,fr)}})}),lr().then(function(){at(Ut,ir)})}function tt(or,sr){var ir={del:[],add:[],change:[]};for(var lr in or)sr[lr]||ir.del.push(lr);for(lr in sr){var dr=or[lr],cr=sr[lr];if(!dr)ir.add.push([lr,cr]);else{var ur={name:lr,def:cr,recreate:!1,del:[],add:[],change:[]};if(dr.primKey.src!==cr.primKey.src)ur.recreate=!0,ir.change.push(ur);else{var hr=dr.idxByName,pr=cr.idxByName;for(var fr in hr)pr[fr]||ur.del.push(fr);for(fr in pr){var mr=hr[fr],gr=pr[fr];mr?mr.src!==gr.src&&ur.change.push(gr):ur.add.push(gr)}(0<ur.del.length||0<ur.add.length||0<ur.change.length)&&ir.change.push(ur)}}}return ir}function rt(or,sr,ir,lr){var dr=or.db.createObjectStore(sr,ir.keyPath?{keyPath:ir.keyPath,autoIncrement:ir.auto}:{autoIncrement:ir.auto});return lr.forEach(function(cr){st(dr,cr)}),dr}function at(or,sr){Ge(or).forEach(function(ir){sr.db.objectStoreNames.contains(ir)||rt(sr,ir,or[ir].primKey,or[ir].indexes)})}function ot(or,sr){for(var lr,ir=0;ir<sr.db.objectStoreNames.length;++ir)lr=sr.db.objectStoreNames[ir],null==or[lr]&&sr.db.deleteObjectStore(lr)}function st(or,sr){or.createIndex(sr.name,sr.keyPath,{unique:sr.unique,multiEntry:sr.multi})}function lt(or){return Zt.on.error.fire(or)}function dt(or,sr,ir){if(!Qt&&!Sn.letThrough){if(!Gt){if(!qt)return Ke(new mn.DatabaseClosed,lt);Zt.open().catch(W)}return Jt.then(function(){return dt(or,sr,ir)})}var lr=Zt._createTransaction(or,sr,Ut);return lr._promise(or,function(dr,cr){Ae(function(){Sn.trans=lr,ir(dr,cr,lr)})}).then(function(dr){return lr._completion.then(function(){return dr})})}function ct(or,sr,ir){this.name=or,this.schema=sr,this.hook=zt[or]?zt[or].hook:de(null,{creating:[Y,W],reading:[G,H],updating:[Z,W],deleting:[X,W]}),this._collClass=ir||gt}function ut(or,sr,ir){ct.call(this,or,sr,ir||yt)}function ht(or,sr,ir){return(ir?Fe:qe)(function(lr){or.push(lr),sr&&sr()})}function pt(or,sr,ir,lr,dr){return new ce(function(cr,ur){var hr=ir.length,pr=hr-1;if(0===hr)return cr();if(!lr)for(var mr,fr=0;fr<hr;++fr)mr=or.delete(ir[fr]),mr.onerror=Ie(qe(ur)),fr===pr&&(mr.onsuccess=Ie(function(){return cr()}));else{var gr,br=Fe(ur),yr=Me(null);B(function(){for(var _r=0;_r<hr;++_r){gr={onsuccess:null,onerror:null};var vr=ir[_r];dr.call(gr,vr[0],vr[1],sr);var kr=or.delete(vr[0]);kr._hookCtx=gr,kr.onerror=br,kr.onsuccess=_r===pr?Me(cr):yr}},function(_r){throw gr.onerror&&gr.onerror(_r),_r})}}).uncaught(lt)}function ft(or,sr,ir,lr){var dr=this;this.db=Zt,this.mode=or,this.storeNames=sr,this.idbtrans=null,this.on=de(this,"complete","error","abort"),this.parent=lr||null,this.active=!0,this._tables=null,this._reculock=0,this._blockedFuncs=[],this._psd=null,this._dbschema=ir,this._resolve=null,this._reject=null,this._completion=new ce(function(cr,ur){dr._resolve=cr,dr._reject=ur}).uncaught(lt),this._completion.then(function(){dr.on.complete.fire()},function(cr){return dr.on.error.fire(cr),dr.parent?dr.parent._reject(cr):dr.active&&dr.idbtrans&&dr.idbtrans.abort(),dr.active=!1,Ke(cr)})}function mt(or,sr,ir){this._ctx={table:or,index:":id"===sr?null:sr,collClass:or._collClass,or:ir}}function gt(or,sr){var ir=null,lr=null;if(sr)try{ir=sr()}catch(ur){lr=ur}var dr=or._ctx,cr=dr.table;this._ctx={table:cr,index:dr.index,isPrimKey:!dr.index||cr.schema.primKey.keyPath&&dr.index===cr.schema.primKey.name,range:ir,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:lr,or:dr.or,valueMapper:cr.hook.reading.fire}}function bt(or,sr){return!(or.filter||or.algorithm||or.or)&&(sr?or.justLimit:!or.replayFilter)}function yt(){gt.apply(this,arguments)}function _t(or,sr){return or._cfg.version-sr._cfg.version}function vt(or,sr,ir,lr){sr.forEach(function(dr){var cr=Zt._tableFactory(ir,lr[dr]);or.forEach(function(ur){dr in ur||(ur[dr]=cr)})})}function kt(or){or.forEach(function(sr){for(var ir in sr)sr[ir]instanceof ct&&delete sr[ir]})}function xt(or,sr,ir,lr,dr,cr){var ur=cr?function(pr,fr,mr){return ir(cr(pr),fr,mr)}:ir,hr=Ie(ur,dr);or.onerror||(or.onerror=qe(dr)),or.onsuccess=sr?N(function(){var fr=or.result;if(fr){var mr=function(){fr.continue()};sr(fr,function(gr){mr=gr},lr,dr)&&hr(fr.value,fr,function(gr){mr=gr}),mr()}else lr()},dr):N(function(){var fr=or.result;if(fr){var mr=function(){fr.continue()};hr(fr.value,fr,function(gr){mr=gr}),mr()}else lr()},dr)}function wt(or){var sr=[];return or.split(",").forEach(function(ir){ir=ir.trim();var lr=ir.replace(/([&*]|\+\+)/g,""),dr=/^\[/.test(lr)?lr.match(/^\[(.*)\]$/)[1].split("+"):lr;sr.push(new Le(lr,dr||null,/\&/.test(ir),/\*/.test(ir),/\+\+/.test(ir),Qe(dr),/\./.test(ir)))}),sr}function Pt(or,sr){return Ft.cmp(or,sr)}function Dt(or,sr){return 0>Pt(or,sr)?or:sr}function jt(or,sr){return 0<Pt(or,sr)?or:sr}function Ct(or,sr){return Ft.cmp(or,sr)}function It(or,sr){return Ft.cmp(sr,or)}function At(or,sr){return or<sr?-1:or===sr?0:1}function Et(or,sr){return or>sr?-1:or===sr?0:1}function St(or,sr){return or?sr?function(){return or.apply(this,arguments)&&sr.apply(this,arguments)}:or:sr}function Kt(){if(Zt.verno=Wt.version/10,Zt._dbSchema=Ut={},Lt=I(Wt.objectStoreNames,0),0!==Lt.length){var or=Wt.transaction(We(Lt),"readonly");Lt.forEach(function(sr){for(var pr,ir=or.objectStore(sr),lr=ir.keyPath,dr=lr&&"string"==typeof lr&&-1!==lr.indexOf("."),cr=new Le(lr,lr||"",!1,!1,!!ir.autoIncrement,lr&&"string"!=typeof lr,dr),ur=[],hr=0;hr<ir.indexNames.length;++hr){pr=ir.index(ir.indexNames[hr]),lr=pr.keyPath,dr=lr&&"string"==typeof lr&&-1!==lr.indexOf(".");var fr=new Le(pr.name,lr,!!pr.unique,!!pr.multiEntry,!1,lr&&"string"!=typeof lr,dr);ur.push(fr)}Ut[sr]=new ze(sr,cr,ur,{})}),vt([zt,ft.prototype],Ge(Ut),Xt,Ut)}}function Ot(or,sr){for(var ir=sr.db.objectStoreNames,lr=0;lr<ir.length;++lr){var dr=ir[lr],cr=sr.objectStore(dr);ar="getAll"in cr;for(var ur=0;ur<cr.indexNames.length;++ur){var hr=cr.indexNames[ur],pr=cr.index(hr).keyPath,fr="string"==typeof pr?pr:"["+I(pr).join("+")+"]";if(or[dr]){var mr=or[dr].idxByName[fr];mr&&(mr.name=hr)}}}}function Nt(or){Zt.on("blocked").fire(or),Vn.filter(function(sr){return sr.name===Zt.name&&sr!==Zt&&!sr._vcFired}).map(function(sr){return sr.on("versionchange").fire(or)})}var $t,er,ar,Tt=Oe.dependencies,Bt=y({addons:Oe.addons,autoOpen:!0,indexedDB:Tt.indexedDB,IDBKeyRange:Tt.IDBKeyRange},Zn),Mt=Bt.addons,qt=Bt.autoOpen,Ft=Bt.indexedDB,Rt=Bt.IDBKeyRange,Ut=this._dbSchema={},Vt=[],Lt=[],zt={},Wt=null,Ht=null,Gt=!1,Qt=!1,Yt="readonly",Xt="readwrite",Zt=this,Jt=new ce(function(or){$t=or}),nr=new ce(function(or,sr){er=sr}),tr=!0,rr=!!He(Ft);this.version=function(or){if(Wt||Gt)throw new mn.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,or);var sr=Vt.filter(function(ir){return ir._cfg.version===or})[0];return sr?sr:(sr=new Jn(or),Vt.push(sr),Vt.sort(_t),sr)},y(Jn.prototype,{stores:function(or){this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,or):or;var sr={};Vt.forEach(function(lr){y(sr,lr._cfg.storesSource)});var ir=this._cfg.dbschema={};return this._parseStoresSpec(sr,ir),Ut=Zt._dbSchema=ir,kt([zt,Zt,ft.prototype]),vt([zt,Zt,ft.prototype,this._cfg.tables],Ge(ir),Xt,ir),Lt=Ge(ir),this},upgrade:function(or){var sr=this;return Gn(function(){or(Zt._createTransaction(Xt,Ge(sr._cfg.dbschema),sr._cfg.dbschema))}),this._cfg.contentUpgrade=or,this},_parseStoresSpec:function(or,sr){Ge(or).forEach(function(ir){if(null!==or[ir]){var lr={},dr=wt(or[ir]),cr=dr.shift();if(cr.multi)throw new mn.Schema("Primary key cannot be multi-valued");cr.keyPath&&q(lr,cr.keyPath,cr.auto?0:cr.keyPath),dr.forEach(function(ur){if(ur.auto)throw new mn.Schema("Only primary key can be marked as autoIncrement (++)");if(!ur.keyPath)throw new mn.Schema("Index must have a name and cannot be an empty string");q(lr,ur.keyPath,ur.compound?ur.keyPath.map(function(){return""}):"")}),sr[ir]=new ze(ir,cr,dr,lr)}})}}),this._allTables=zt,this._tableFactory=function(sr,ir){return sr===Yt?new ct(ir.name,ir,gt):new ut(ir.name,ir)},this._createTransaction=function(or,sr,ir,lr){return new ft(or,sr,ir,lr)},this._whenReady=function(or){return new ce(Qn||Qt||Sn.letThrough?or:function(sr,ir){if(!Gt){if(!qt)return void ir(new mn.DatabaseClosed);Zt.open().catch(W)}Jt.then(function(){or(sr,ir)})}).uncaught(lt)},this.verno=0,this.open=function(){if(Gt||Wt)return Jt.then(function(){return Ht?Ke(Ht,lt):Zt});an&&(nr._stackHolder=ne()),Gt=!0,Ht=null,Qt=!1;var or=$t,sr=null;return ce.race([nr,new ce(function(ir,lr){if(E(function(){return ir()}),0<Vt.length&&(tr=!1),!Ft)throw new mn.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var dr=tr?Ft.open(Xn):Ft.open(Xn,Math.round(10*Zt.verno));if(!dr)throw new mn.MissingAPI("IndexedDB API not available");dr.onerror=Ie(qe(lr)),dr.onblocked=Ie(Nt),dr.onupgradeneeded=Ie(function(cr){if(sr=dr.transaction,tr&&!Zt._allowEmptyDB){dr.onerror=Re,sr.abort(),dr.result.close();var ur=Ft.deleteDatabase(Xn);ur.onsuccess=ur.onerror=Ie(function(){lr(new mn.NoSuchDatabase("Database "+Xn+" doesnt exist"))})}else{sr.onerror=Ie(qe(lr));var hr=cr.oldVersion>Math.pow(2,62)?0:cr.oldVersion;et(hr/10,sr,lr,dr)}},lr),dr.onsuccess=Ie(function(){if(sr=null,Wt=dr.result,Vn.push(Zt),tr)Kt();else if(0<Wt.objectStoreNames.length)try{Ot(Ut,Wt.transaction(We(Wt.objectStoreNames),Yt))}catch(cr){}Wt.onversionchange=Ie(function(cr){Zt._vcFired=!0,Zt.on("versionchange").fire(cr)}),rr||Ue(function(cr){if(-1===cr.indexOf(Xn))return cr.push(Xn)}),ir()},lr)})]).then(function(){return Oe.vip(Zt.on.ready.fire)}).then(function(){return Gt=!1,Zt}).catch(function(ir){try{sr&&sr.abort()}catch(lr){}return Gt=!1,Zt.close(),Ht=ir,Ke(Ht,lt)}).finally(function(){Qt=!0,or()})},this.close=function(){var or=Vn.indexOf(Zt);if(0<=or&&Vn.splice(or,1),Wt){try{Wt.close()}catch(sr){}Wt=null}qt=!1,Ht=new mn.DatabaseClosed,Gt&&er(Ht),Jt=new ce(function(sr){$t=sr}),nr=new ce(function(sr,ir){er=ir})},this.delete=function(){var or=0<arguments.length;return new ce(function(sr,ir){function lr(){Zt.close();var dr=Ft.deleteDatabase(Xn);dr.onsuccess=Ie(function(){rr||Ue(function(cr){var ur=cr.indexOf(Xn);if(0<=ur)return cr.splice(ur,1)}),sr()}),dr.onerror=Ie(qe(ir)),dr.onblocked=Nt}if(or)throw new mn.InvalidArgument("Arguments not allowed in db.delete()");Gt?Jt.then(lr):lr()}).uncaught(lt)},this.backendDB=function(){return Wt},this.isOpen=function(){return null!==Wt},this.hasFailed=function(){return null!==Ht},this.dynamicallyOpened=function(){return tr},this.name=Xn,P(this,"tables",{get:function(){return Ge(zt).map(function(or){return zt[or]})}}),this.on=de(this,"error","populate","blocked","versionchange",{ready:[J,W]}),this.on.error.subscribe=re("Dexie.on.error",this.on.error.subscribe),this.on.error.unsubscribe=re("Dexie.on.error.unsubscribe",this.on.error.unsubscribe),this.on.ready.subscribe=A(this.on.ready.subscribe,function(or){return function(sr,ir){Oe.vip(function(){Qt?(!Ht&&ce.resolve().then(sr),ir&&or(sr)):(or(sr),!ir&&or(function lr(){Zt.on.ready.unsubscribe(sr),Zt.on.ready.unsubscribe(lr)}))})}}),Gn(function(){Zt.on("populate").fire(Zt._createTransaction(Xt,Lt,Ut)),Zt.on("error").fire(new Error)}),this.transaction=function(or,sr,ir){function lr(mr){var gr=Sn;mr(ce.resolve().then(function(){return Ae(function(){Sn.transless=Sn.transless||gr;var br=Zt._createTransaction(or,fr,Ut,hr);Sn.trans=br,hr?br.idbtrans=hr.idbtrans:br.create();var yr=fr.map(function(vr){return zt[vr]});yr.push(br);var _r;return ce.follow(function(){if(_r=ir.apply(br,yr),_r)if("function"==typeof _r.next&&"function"==typeof _r.throw)_r=Ve(_r);else if("function"==typeof _r.then&&!k(_r,"_PSD"))throw new mn.IncompatiblePromise("Incompatible Promise returned from transaction scope (read more at http://tinyurl.com/znyqjqc). Transaction scope: "+ir.toString())}).uncaught(lt).then(function(){return hr&&br._resolve(),br._completion}).then(function(){return _r}).catch(function(vr){return br._reject(vr),Ke(vr)})})}))}var dr=arguments.length;if(2>dr)throw new mn.InvalidArgument("Too few arguments");for(var cr=Array(dr-1);--dr;)cr[dr-1]=arguments[dr];ir=cr.pop();var ur=z(cr),hr=Sn.trans;hr&&hr.db===Zt&&-1===or.indexOf("!")||(hr=null);var pr=-1!==or.indexOf("?");or=or.replace("!","").replace("?","");try{var fr=ur.map(function(mr){var gr=mr instanceof ct?mr.name:mr;if("string"!=typeof gr)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return gr});if("r"==or||or==Yt)or=Yt;else if("rw"==or||or==Xt)or=Xt;else throw new mn.InvalidArgument("Invalid transaction mode: "+or);if(hr){if(hr.mode===Yt&&or===Xt)if(pr)hr=null;else throw new mn.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");hr&&fr.forEach(function(mr){if(hr&&-1===hr.storeNames.indexOf(mr))if(pr)hr=null;else throw new mn.SubTransaction("Table "+mr+" not included in parent transaction.")})}}catch(mr){return hr?hr._promise(null,function(gr,br){br(mr)}):Ke(mr,lt)}return hr?hr._promise(or,lr,"lock"):Zt._whenReady(lr)},this.table=function(or){if(Qn&&tr)return new ut(or);if(!k(zt,or))throw new mn.InvalidTable("Table "+or+" does not exist");return zt[or]},w(ct.prototype,{_trans:function(sr,ir,lr){var dr=Sn.trans;return dr&&dr.db===Zt?dr._promise(sr,ir,lr):dt(sr,[this.name],ir)},_idbstore:function(sr,ir,lr){function dr(hr,pr,fr){ir(hr,pr,fr.idbtrans.objectStore(ur),fr)}if(Qn)return new ce(ir);var cr=Sn.trans,ur=this.name;return cr&&cr.db===Zt?cr._promise(sr,dr,lr):dt(sr,[this.name],dr)},get:function(or,sr){var ir=this;return this._idbstore(Yt,function(lr,dr,cr){Qn&&lr(ir.schema.instanceTemplate);var ur=cr.get(or);ur.onerror=qe(dr),ur.onsuccess=Ie(function(){lr(ir.hook.reading.fire(ur.result))},dr)}).then(sr)},where:function(or){return new mt(this,or)},count:function(or){return this.toCollection().count(or)},offset:function(or){return this.toCollection().offset(or)},limit:function(or){return this.toCollection().limit(or)},reverse:function(){return this.toCollection().reverse()},filter:function(or){return this.toCollection().and(or)},each:function(or){return this.toCollection().each(or)},toArray:function(or){return this.toCollection().toArray(or)},orderBy:function(or){return new this._collClass(new mt(this,or))},toCollection:function(){return new this._collClass(new mt(this))},mapToClass:function(or,sr){this.schema.mappedClass=or;var ir=Object.create(or.prototype);sr&&Te(ir,sr),this.schema.instanceTemplate=ir;var lr=function(dr){if(!dr)return dr;var cr=Object.create(or.prototype);for(var ur in dr)if(k(dr,ur))try{cr[ur]=dr[ur]}catch(hr){}return cr};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=lr,this.hook("reading",lr),or},defineClass:function(or){return this.mapToClass(Oe.defineClass(or),or)}}),D(ut).from(ct).extend({bulkDelete:function(or){return this.hook.deleting.fire===W?this._idbstore(Xt,function(sr,ir,lr,dr){sr(pt(lr,dr,or,!1,W))}):this.where(":id").anyOf(or).delete().then(function(){})},bulkPut:function(or,sr){var ir=this;return this._idbstore(Xt,function(lr,dr,cr){if(!cr.keyPath&&!ir.schema.primKey.auto&&!sr)throw new mn.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(cr.keyPath&&sr)throw new mn.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(sr&&sr.length!==or.length)throw new mn.InvalidArgument("Arguments objects and keys must have the same length");if(0===or.length)return lr();var hr,fr,ur=function(xr){0===pr.length?lr(xr):dr(new ie(ir.name+".bulkPut(): "+pr.length+" of "+mr+" operations failed",pr))},pr=[],mr=or.length,gr=ir;if(ir.hook.creating.fire===W&&ir.hook.updating.fire===W){fr=ht(pr);for(var br=0,yr=or.length;br<yr;++br)hr=sr?cr.put(or[br],sr[br]):cr.put(or[br]),hr.onerror=fr;hr.onerror=ht(pr,ur),hr.onsuccess=Be(ur)}else{var _r=sr||cr.keyPath&&or.map(function(xr){return M(xr,cr.keyPath)}),vr=_r&&O(_r,function(xr,wr){return null!=xr&&[xr,or[wr]]}),kr=_r?gr.where(":id").anyOf(_r.filter(function(xr){return null!=xr})).modify(function(){this.value=vr[this.primKey],vr[this.primKey]=null}).catch(se,function(xr){pr=xr.failures}).then(function(){for(var Dr,xr=[],wr=sr&&[],Pr=_r.length-1;0<=Pr;--Pr)Dr=_r[Pr],(null==Dr||vr[Dr])&&(xr.push(or[Pr]),sr&&wr.push(Dr),null!=Dr&&(vr[Dr]=null));return xr.reverse(),sr&&wr.reverse(),gr.bulkAdd(xr,wr)}).then(function(xr){var wr=_r[_r.length-1];return null==wr?xr:wr}):gr.bulkAdd(or);kr.then(ur).catch(ie,function(xr){pr=pr.concat(xr.failures),ur()}).catch(dr)}},"locked")},bulkAdd:function(or,sr){var ir=this,lr=this.hook.creating.fire;return this._idbstore(Xt,function(dr,cr,ur,hr){function pr(wr){0===mr.length?dr(wr):cr(new ie(ir.name+".bulkAdd(): "+mr.length+" of "+yr+" operations failed",mr))}if(!ur.keyPath&&!ir.schema.primKey.auto&&!sr)throw new mn.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(ur.keyPath&&sr)throw new mn.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(sr&&sr.length!==or.length)throw new mn.InvalidArgument("Arguments objects and keys must have the same length");if(0===or.length)return dr();var fr,gr,br,mr=[],yr=or.length;if(lr!==W){var vr,_r=ur.keyPath;gr=ht(mr,null,!0),br=Me(null),B(function(){for(var wr=0,Pr=or.length;wr<Pr;++wr){vr={onerror:null,onsuccess:null};var Dr=sr&&sr[wr],jr=or[wr],Cr=sr?Dr:_r?M(jr,_r):void 0,Ir=lr.call(vr,Cr,jr,hr);null==Cr&&null!=Ir&&(_r?(jr=U(jr),q(jr,_r,Ir)):Dr=Ir),fr=null==Dr?ur.add(jr):ur.add(jr,Dr),fr._hookCtx=vr,wr<Pr-1&&(fr.onerror=gr,vr.onsuccess&&(fr.onsuccess=br))}},function(wr){throw vr.onerror&&vr.onerror(wr),wr}),fr.onerror=ht(mr,pr,!0),fr.onsuccess=Me(pr)}else{gr=ht(mr);for(var kr=0,xr=or.length;kr<xr;++kr)fr=sr?ur.add(or[kr],sr[kr]):ur.add(or[kr]),fr.onerror=gr;fr.onerror=ht(mr,pr),fr.onsuccess=Be(pr)}})},add:function(or,sr){var ir=this.hook.creating.fire;return this._idbstore(Xt,function(lr,dr,cr,ur){var hr={onsuccess:null,onerror:null};if(ir!==W){var pr=null==sr?cr.keyPath?M(or,cr.keyPath):void 0:sr,fr=ir.call(hr,pr,or,ur);null==pr&&null!=fr&&(cr.keyPath?q(or,cr.keyPath,fr):sr=fr)}try{var mr=null==sr?cr.add(or):cr.add(or,sr);mr._hookCtx=hr,mr.onerror=Fe(dr),mr.onsuccess=Me(function(gr){var br=cr.keyPath;br&&q(or,br,gr),lr(gr)})}catch(gr){throw hr.onerror&&hr.onerror(gr),gr}})},put:function(or,sr){var ir=this,lr=this.hook.creating.fire,dr=this.hook.updating.fire;return lr!==W||dr!==W?this._trans(Xt,function(cr,ur,hr){var pr=void 0===sr?ir.schema.primKey.keyPath&&M(or,ir.schema.primKey.keyPath):sr;null==pr?ir.add(or).then(cr,ur):(hr._lock(),or=U(or),ir.where(":id").equals(pr).modify(function(){this.value=or}).then(function(fr){return 0===fr?ir.add(or,sr):pr}).finally(function(){hr._unlock()}).then(cr,ur))}):this._idbstore(Xt,function(cr,ur,hr){var pr=void 0===sr?hr.put(or):hr.put(or,sr);pr.onerror=qe(ur),pr.onsuccess=function(fr){var mr=hr.keyPath;mr&&q(or,mr,fr.target.result),cr(pr.result)}})},delete:function(or){return this.hook.deleting.subscribers.length?this.where(":id").equals(or).delete():this._idbstore(Xt,function(sr,ir,lr){var dr=lr.delete(or);dr.onerror=qe(ir),dr.onsuccess=function(){sr(dr.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(Xt,function(or,sr,ir){var lr=ir.clear();lr.onerror=qe(sr),lr.onsuccess=function(){or(lr.result)}})},update:function(or,sr){if("object"!=typeof sr||Qe(sr))throw new mn.InvalidArgument("Modifications must be an object.");if("object"==typeof or&&!Qe(or)){Ge(sr).forEach(function(lr){q(or,lr,sr[lr])});var ir=M(or,this.schema.primKey.keyPath);return void 0===ir?Ke(new mn.InvalidArgument("Given object does not contain its primary key"),lt):this.where(":id").equals(ir).modify(sr)}return this.where(":id").equals(or).modify(sr)}}),w(ft.prototype,{_lock:function(){return S(!Sn.global),++this._reculock,1!==this._reculock||Sn.global||(Sn.lockOwnerFor=this),this},_unlock:function(){if(S(!Sn.global),0==--this._reculock)for(Sn.global||(Sn.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var or=this._blockedFuncs.shift();try{Ee(or[1],or[0])}catch(sr){}}return this},_locked:function(){return this._reculock&&Sn.lockOwnerFor!==this},create:function(or){var sr=this;if(S(!this.idbtrans),!or&&!Wt)switch(Ht&&Ht.name){case"DatabaseClosedError":throw new mn.DatabaseClosed(Ht);case"MissingAPIError":throw new mn.MissingAPI(Ht.message,Ht);default:throw new mn.OpenFailed(Ht);}if(!this.active)throw new mn.TransactionInactive;return S(null===this._completion._state),or=this.idbtrans=or||Wt.transaction(We(this.storeNames),this.mode),or.onerror=Ie(function(ir){Re(ir),sr._reject(or.error)}),or.onabort=Ie(function(ir){Re(ir),sr.active&&sr._reject(new mn.Abort),sr.active=!1,sr.on("abort").fire(ir)}),or.oncomplete=Ie(function(){sr.active=!1,sr._resolve()}),this},_promise:function(or,sr,ir){var lr=this,dr=lr._locked()?new ce(function(cr,ur){lr._blockedFuncs.push([function(){lr._promise(or,sr,ir).then(cr,ur)},Sn])}):Ae(function(){var cr=lr.active?new ce(function(ur,hr){if(or===Xt&&lr.mode!==Xt)throw new mn.ReadOnly("Transaction is readonly");!lr.idbtrans&&or&&lr.create(),ir&&lr._lock(),sr(ur,hr,lr)}):Ke(new mn.TransactionInactive);return lr.active&&ir&&cr.finally(function(){lr._unlock()}),cr});return dr._lib=!0,dr.uncaught(lt)},abort:function(){this.active&&this._reject(new mn.Abort),this.active=!1},tables:{get:re("Transaction.tables",function(){return O(this.storeNames,function(or){return[or,zt[or]]})},"Use db.tables()")},complete:re("Transaction.complete()",function(or){return this.on("complete",or)}),error:re("Transaction.error()",function(or){return this.on("error",or)}),table:re("Transaction.table()",function(or){if(-1===this.storeNames.indexOf(or))throw new mn.InvalidTable("Table "+or+" not in transaction");return zt[or]})}),w(mt.prototype,function(){function or(ur,hr,pr){var fr=ur instanceof mt?new ur._ctx.collClass(ur):ur;return fr._ctx.error=pr?new pr(hr):new TypeError(hr),fr}function sr(ur){return new ur._ctx.collClass(ur,function(){return Rt.only("")}).limit(0)}function ir(ur){return"next"===ur?function(hr){return hr.toUpperCase()}:function(hr){return hr.toLowerCase()}}function lr(ur){return"next"===ur?function(hr){return hr.toLowerCase()}:function(hr){return hr.toUpperCase()}}function dr(ur,hr,pr,fr,mr,gr){for(var vr,br=Math.min(ur.length,fr.length),yr=-1,_r=0;_r<br;++_r){if(vr=hr[_r],vr!==fr[_r])return 0>mr(ur[_r],pr[_r])?ur.substr(0,_r)+pr[_r]+pr.substr(_r+1):0>mr(ur[_r],fr[_r])?ur.substr(0,_r)+fr[_r]+pr.substr(_r+1):0<=yr?ur.substr(0,yr)+hr[yr]+pr.substr(yr+1):null;0>mr(ur[_r],vr)&&(yr=_r)}return br<fr.length&&"next"===gr?ur+pr.substr(ur.length):br<ur.length&&"prev"===gr?ur.substr(0,pr.length):0>yr?null:ur.substr(0,yr)+fr[yr]+pr.substr(yr+1)}function cr(ur,hr,pr,fr){function mr(jr){gr=ir(jr),br=lr(jr),yr="next"===jr?At:Et;var Cr=pr.map(function(Ir){return{lower:br(Ir),upper:gr(Ir)}}).sort(function(Ir,Ar){return yr(Ir.lower,Ar.lower)});_r=Cr.map(function(Ir){return Ir.upper}),vr=Cr.map(function(Ir){return Ir.lower}),kr=jr,xr="next"===jr?"":fr}var gr,br,yr,_r,vr,kr,xr,wr=pr.length;if(!pr.every(function(jr){return"string"==typeof jr}))return or(ur,Un);mr("next");var Pr=new ur._ctx.collClass(ur,function(){return Rt.bound(_r[0],vr[wr-1]+fr)});Pr._ondirectionchange=function(jr){mr(jr)};var Dr=0;return Pr._addAlgorithm(function(jr,Cr,Ir){var Ar=jr.key;if("string"!=typeof Ar)return!1;var Er=br(Ar);if(hr(Er,vr,Dr))return!0;for(var Or,Sr=null,Kr=Dr;Kr<wr;++Kr)Or=dr(Ar,Er,_r[Kr],vr[Kr],yr,kr),null===Or&&null==Sr?Dr=Kr+1:(null==Sr||0<yr(Sr,Or))&&(Sr=Or);return null===Sr?Cr(Ir):Cr(function(){jr.continue(Sr+xr)}),!1}),Pr}return{between:function(ur,hr,pr,fr){pr=!1!==pr,fr=!0===fr;try{return 0<Pt(ur,hr)||0===Pt(ur,hr)&&(pr||fr)&&!(pr&&fr)?sr(this):new this._ctx.collClass(this,function(){return Rt.bound(ur,hr,!pr,!fr)})}catch(mr){return or(this,Rn)}},equals:function(ur){return new this._ctx.collClass(this,function(){return Rt.only(ur)})},above:function(ur){return new this._ctx.collClass(this,function(){return Rt.lowerBound(ur,!0)})},aboveOrEqual:function(ur){return new this._ctx.collClass(this,function(){return Rt.lowerBound(ur)})},below:function(ur){return new this._ctx.collClass(this,function(){return Rt.upperBound(ur,!0)})},belowOrEqual:function(ur){return new this._ctx.collClass(this,function(){return Rt.upperBound(ur)})},startsWith:function(ur){return"string"==typeof ur?this.between(ur,ur+qn,!0,!0):or(this,Un)},startsWithIgnoreCase:function(ur){return""===ur?this.startsWith(ur):cr(this,function(hr,pr){return 0===hr.indexOf(pr[0])},[ur],qn)},equalsIgnoreCase:function(ur){return cr(this,function(hr,pr){return hr===pr[0]},[ur],"")},anyOfIgnoreCase:function(){var ur=L.apply(tn,arguments);return 0===ur.length?sr(this):cr(this,function(hr,pr){return-1!==pr.indexOf(hr)},ur,"")},startsWithAnyOfIgnoreCase:function(){var ur=L.apply(tn,arguments);return 0===ur.length?sr(this):cr(this,function(hr,pr){return pr.some(function(fr){return 0===hr.indexOf(fr)})},ur,qn)},anyOf:function(){var ur=L.apply(tn,arguments),hr=Ct;try{ur.sort(hr)}catch(mr){return or(this,Rn)}if(0===ur.length)return sr(this);var pr=new this._ctx.collClass(this,function(){return Rt.bound(ur[0],ur[ur.length-1])});pr._ondirectionchange=function(mr){hr="next"===mr?Ct:It,ur.sort(hr)};var fr=0;return pr._addAlgorithm(function(mr,gr,br){for(var yr=mr.key;0<hr(yr,ur[fr]);)if(++fr,fr===ur.length)return gr(br),!1;return 0===hr(yr,ur[fr])||(gr(function(){mr.continue(ur[fr])}),!1)}),pr},notEqual:function(ur){return this.inAnyRange([[-Infinity,ur],[ur,Fn]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var ur=L.apply(tn,arguments);if(0===ur.length)return new this._ctx.collClass(this);try{ur.sort(Ct)}catch(pr){return or(this,Rn)}var hr=ur.reduce(function(pr,fr){return pr?pr.concat([[pr[pr.length-1][1],fr]]):[[-Infinity,fr]]},null);return hr.push([ur[ur.length-1],Fn]),this.inAnyRange(hr,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(ur,hr){function pr(jr,Cr){for(var Er,Ir=0,Ar=jr.length;Ir<Ar;++Ir)if(Er=jr[Ir],0>Pt(Cr[0],Er[1])&&0<Pt(Cr[1],Er[0])){Er[0]=Dt(Er[0],Cr[0]),Er[1]=jt(Er[1],Cr[1]);break}return Ir===Ar&&jr.push(Cr),jr}function fr(jr,Cr){return _r(jr[0],Cr[0])}function mr(jr){return!xr(jr)&&!wr(jr)}var gr=this._ctx;if(0===ur.length)return sr(this);if(!ur.every(function(jr){return void 0!==jr[0]&&void 0!==jr[1]&&0>=Ct(jr[0],jr[1])}))return or(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",mn.InvalidArgument);var vr,br=!hr||!1!==hr.includeLowers,yr=hr&&!0===hr.includeUppers,_r=Ct;try{vr=ur.reduce(pr,[]),vr.sort(fr)}catch(jr){return or(this,Rn)}var kr=0,xr=yr?function(jr){return 0<Ct(jr,vr[kr][1])}:function(jr){return 0<=Ct(jr,vr[kr][1])},wr=br?function(jr){return 0<It(jr,vr[kr][0])}:function(jr){return 0<=It(jr,vr[kr][0])},Pr=xr,Dr=new gr.collClass(this,function(){return Rt.bound(vr[0][0],vr[vr.length-1][1],!br,!yr)});return Dr._ondirectionchange=function(jr){"next"===jr?(Pr=xr,_r=Ct):(Pr=wr,_r=It),vr.sort(fr)},Dr._addAlgorithm(function(jr,Cr,Ir){for(var Ar=jr.key;Pr(Ar);)if(++kr,kr===vr.length)return Cr(Ir),!1;return!!mr(Ar)||(0===Pt(Ar,vr[kr][1])||0===Pt(Ar,vr[kr][0])?!1:(Cr(function(){_r===Ct?jr.continue(vr[kr][0]):jr.continue(vr[kr][1])}),!1))}),Dr},startsWithAnyOf:function(){var ur=L.apply(tn,arguments);return ur.every(function(hr){return"string"==typeof hr})?0===ur.length?sr(this):this.inAnyRange(ur.map(function(hr){return[hr,hr+qn]})):or(this,"startsWithAnyOf() only works with strings")}}}),w(gt.prototype,function(){function or(hr,pr){hr.filter=St(hr.filter,pr)}function sr(hr,pr,fr){var mr=hr.replayFilter;hr.replayFilter=mr?function(){return St(mr(),pr())}:pr,hr.justLimit=fr&&!mr}function ir(hr,pr){hr.isMatch=St(hr.isMatch,pr)}function lr(hr,pr){if(hr.isPrimKey)return pr;var fr=hr.table.schema.idxByName[hr.index];if(!fr)throw new mn.Schema("KeyPath "+hr.index+" on object store "+pr.name+" is not indexed");return pr.index(fr.name)}function dr(hr,pr){var fr=lr(hr,pr);return hr.keysOnly&&"openKeyCursor"in fr?fr.openKeyCursor(hr.range||null,hr.dir+hr.unique):fr.openCursor(hr.range||null,hr.dir+hr.unique)}function cr(hr,pr,fr,mr,gr){var br=hr.replayFilter?St(hr.filter,hr.replayFilter()):hr.filter;hr.or?function(){function yr(){2==++kr&&fr()}function _r(xr,wr,Pr){if(!br||br(wr,Pr,yr,mr)){var Dr=wr.primaryKey.toString();k(vr,Dr)||(vr[Dr]=!0,pr(xr,wr,Pr))}}var vr={},kr=0;hr.or._iterate(_r,yr,mr,gr),xt(dr(hr,gr),hr.algorithm,_r,yr,mr,!hr.keysOnly&&hr.valueMapper)}():xt(dr(hr,gr),St(hr.algorithm,br),pr,fr,mr,!hr.keysOnly&&hr.valueMapper)}function ur(hr){return hr.table.schema.instanceTemplate}return{_read:function(hr,pr){var fr=this._ctx;return fr.error?fr.table._trans(null,function(gr,br){br(fr.error)}):fr.table._idbstore(Yt,hr).then(pr)},_write:function(hr){var pr=this._ctx;return pr.error?pr.table._trans(null,function(mr,gr){gr(pr.error)}):pr.table._idbstore(Xt,hr,"locked")},_addAlgorithm:function(hr){var pr=this._ctx;pr.algorithm=St(pr.algorithm,hr)},_iterate:function(hr,pr,fr,mr){return cr(this._ctx,hr,pr,fr,mr)},clone:function(hr){var pr=Object.create(this.constructor.prototype),fr=Object.create(this._ctx);return hr&&y(fr,hr),pr._ctx=fr,pr},raw:function(){return this._ctx.valueMapper=null,this},each:function(hr){var pr=this._ctx;if(Qn){var fr=ur(pr),mr=pr.table.schema.primKey.keyPath,gr=M(fr,pr.index?pr.table.schema.idxByName[pr.index].keyPath:mr),br=M(fr,mr);hr(fr,{key:gr,primaryKey:br})}return this._read(function(yr,_r,vr){cr(pr,hr,yr,_r,vr)})},count:function(hr){if(Qn)return ce.resolve(0).then(hr);var pr=this._ctx;if(bt(pr,!0))return this._read(function(mr,gr,br){var yr=lr(pr,br),_r=pr.range?yr.count(pr.range):yr.count();_r.onerror=qe(gr),_r.onsuccess=function(vr){mr(Math.min(vr.target.result,pr.limit))}},hr);var fr=0;return this._read(function(mr,gr,br){cr(pr,function(){return++fr,!1},function(){mr(fr)},gr,br)},hr)},sortBy:function(hr,pr){function fr(vr,kr){return kr?fr(vr[gr[kr]],kr-1):vr[br]}function mr(vr,kr){var xr=fr(vr,yr),wr=fr(kr,yr);return xr<wr?-_r:xr>wr?_r:0}var gr=hr.split(".").reverse(),br=gr[0],yr=gr.length-1,_r="next"===this._ctx.dir?1:-1;return this.toArray(function(vr){return vr.sort(mr)}).then(pr)},toArray:function(hr){var pr=this._ctx;return this._read(function(fr,mr,gr){if(Qn&&fr([ur(pr)]),ar&&"next"===pr.dir&&bt(pr,!0)&&0<pr.limit){var br=pr.table.hook.reading.fire,yr=lr(pr,gr),_r=pr.limit<Infinity?yr.getAll(pr.range,pr.limit):yr.getAll(pr.range);_r.onerror=qe(mr),_r.onsuccess=br===H?Be(fr):Ie(Be(function(kr){try{fr(kr.map(br))}catch(xr){mr(xr)}}))}else{var vr=[];cr(pr,function(kr){vr.push(kr)},function(){fr(vr)},mr,gr)}},hr)},offset:function(hr){var pr=this._ctx;return 0>=hr?this:(pr.offset+=hr,bt(pr)?sr(pr,function(){var fr=hr;return function(mr,gr){return 0===fr||(1===fr?(--fr,!1):(gr(function(){mr.advance(fr),fr=0}),!1))}}):sr(pr,function(){var fr=hr;return function(){return 0>--fr}}),this)},limit:function(hr){return this._ctx.limit=Math.min(this._ctx.limit,hr),sr(this._ctx,function(){var pr=hr;return function(fr,mr,gr){return 0>=--pr&&mr(gr),0<=pr}},!0),this},until:function(hr,pr){var fr=this._ctx;return Qn&&hr(ur(fr)),or(this._ctx,function(mr,gr,br){return!hr(mr.value)||(gr(br),pr)}),this},first:function(hr){return this.limit(1).toArray(function(pr){return pr[0]}).then(hr)},last:function(hr){return this.reverse().first(hr)},filter:function(hr){return Qn&&hr(ur(this._ctx)),or(this._ctx,function(pr){return hr(pr.value)}),ir(this._ctx,hr),this},and:function(hr){return this.filter(hr)},or:function(hr){return new mt(this._ctx.table,hr,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(hr){var pr=this._ctx;return pr.keysOnly=!pr.isMatch,this.each(function(fr,mr){hr(mr.key,mr)})},eachUniqueKey:function(hr){return this._ctx.unique="unique",this.eachKey(hr)},eachPrimaryKey:function(hr){var pr=this._ctx;return pr.keysOnly=!pr.isMatch,this.each(function(fr,mr){hr(mr.primaryKey,mr)})},keys:function(hr){var pr=this._ctx;pr.keysOnly=!pr.isMatch;var fr=[];return this.each(function(mr,gr){fr.push(gr.key)}).then(function(){return fr}).then(hr)},primaryKeys:function(hr){var pr=this._ctx;if(ar&&"next"===pr.dir&&bt(pr,!0)&&0<pr.limit)return this._read(function(mr,gr,br){var yr=lr(pr,br),_r=pr.limit<Infinity?yr.getAllKeys(pr.range,pr.limit):yr.getAllKeys(pr.range);_r.onerror=qe(gr),_r.onsuccess=Be(mr)}).then(hr);pr.keysOnly=!pr.isMatch;var fr=[];return this.each(function(mr,gr){fr.push(gr.primaryKey)}).then(function(){return fr}).then(hr)},uniqueKeys:function(hr){return this._ctx.unique="unique",this.keys(hr)},firstKey:function(hr){return this.limit(1).keys(function(pr){return pr[0]}).then(hr)},lastKey:function(hr){return this.reverse().firstKey(hr)},distinct:function(){var hr=this._ctx,pr=hr.index&&hr.table.schema.idxByName[hr.index];if(!pr||!pr.multi)return this;var fr={};return or(this._ctx,function(mr){var gr=mr.primaryKey.toString(),br=k(fr,gr);return fr[gr]=!0,!br}),this}}}),D(yt).from(gt).extend({modify:function(or){var sr=this,ir=this._ctx,lr=ir.table.hook,dr=lr.updating.fire,cr=lr.deleting.fire;return Qn&&"function"==typeof or&&or.call({value:ir.table.schema.instanceTemplate},ir.table.schema.instanceTemplate),this._write(function(ur,hr,pr,fr){function gr(Ir){return Ir&&(Dr.push(Ir),jr.push(Cr)),hr(new se("Error modifying one or more objects",Dr,wr,jr))}function br(){Pr&&wr+Dr.length===xr&&(0<Dr.length?gr():ur(wr))}var yr;if("function"==typeof or)yr=dr===W&&cr===W?or:function(Ir){var Ar=U(Ir);if(!1===or.call(this,Ir,this))return!1;if(!k(this,"value"))cr.call(this,this.primKey,Ir,fr);else{var Er=V(Ar,this.value),Sr=dr.call(this,Er,this.primKey,Ar,fr);Sr&&(Ir=this.value,Ge(Sr).forEach(function(Kr){q(Ir,Kr,Sr[Kr])}))}};else if(dr===W){var _r=Ge(or),vr=_r.length;yr=function(Ir){for(var Ar=!1,Er=0;Er<vr;++Er){var Sr=_r[Er],Kr=or[Sr];M(Ir,Sr)!==Kr&&(q(Ir,Sr,Kr),Ar=!0)}return Ar}}else{var kr=or;or=R(kr),yr=function(Ir){var Ar=!1,Er=dr.call(this,or,this.primKey,U(Ir),fr);return Er&&y(or,Er),Ge(or).forEach(function(Sr){var Kr=or[Sr];M(Ir,Sr)!==Kr&&(q(Ir,Sr,Kr),Ar=!0)}),Er&&(or=R(kr)),Ar}}var xr=0,wr=0,Pr=!1,Dr=[],jr=[],Cr=null;sr.clone().raw()._iterate(function(Ir,Ar){function Er(Or){return Dr.push(Or),jr.push(Sr.primKey),br(),!0}Cr=Ar.primaryKey;var Sr={primKey:Ar.primaryKey,value:Ir,onsuccess:null,onerror:null};if(!1!==yr.call(Sr,Ir,Sr)){var Kr=!k(Sr,"value");++xr,B(function(){var Or=Kr?Ar.delete():Ar.update(Sr.value);Or._hookCtx=Sr,Or.onerror=Fe(Er),Or.onsuccess=Me(function(){++wr,br()})},Er)}else Sr.onsuccess&&Sr.onsuccess(Sr.value)},function(){Pr=!0,br()},gr,pr)})},delete:function(){var or=this,sr=this._ctx,ir=sr.range,lr=sr.table.hook.deleting.fire,dr=lr!==W;if(!dr&&bt(sr)&&(sr.isPrimKey&&!Wn||!ir))return this._write(function(ur,hr,pr){var fr=qe(hr),mr=ir?pr.count(ir):pr.count();mr.onerror=fr,mr.onsuccess=function(){var gr=mr.result;B(function(){var br=ir?pr.delete(ir):pr.clear();br.onerror=fr,br.onsuccess=function(){return ur(gr)}},function(br){return hr(br)})}});var cr=dr?2e3:1e4;return this._write(function(ur,hr,pr,fr){var mr=0,gr=or.clone({keysOnly:!sr.isMatch&&!dr}).distinct().limit(cr).raw(),br=[],yr=function(){return gr.each(dr?function(_r,vr){br.push([vr.primaryKey,vr.value])}:function(_r,vr){br.push(vr.primaryKey)}).then(function(){return dr?br.sort(function(_r,vr){return Ct(_r[0],vr[0])}):br.sort(Ct),pt(pr,fr,br,dr,lr)}).then(function(){var _r=br.length;return mr+=_r,br=[],_r<cr?mr:yr()})};ur(yr())})}}),y(this,{Collection:gt,Table:ct,Transaction:ft,Version:Jn,WhereClause:mt,WriteableCollection:yt,WriteableTable:ut}),function(){Zt.on("versionchange",function(or){0<or.newVersion?console.warn("Another connection wants to upgrade database '"+Zt.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+Zt.name+"'. Closing db now to resume the delete request."),Zt.close()}),Zt.on("blocked",function(or){!or.newVersion||or.newVersion<or.oldVersion?console.warn("Dexie.delete('"+Zt.name+"') was blocked"):console.warn("Upgrade '"+Zt.name+"' blocked by other connection holding version "+or.oldVersion/10)})}(),Mt.forEach(function(or){or(Zt)})}function Ne(Xn){if("function"==typeof Xn)return new Xn;if(Qe(Xn))return[Ne(Xn[0])];if(Xn&&"object"==typeof Xn){var Zn={};return Te(Zn,Xn),Zn}return Xn}function Te(Xn,Zn){return Ge(Zn).forEach(function($n){var Jn=Ne(Zn[$n]);Xn[$n]=Jn}),Xn}function Be(Xn){return function(Zn){Xn(Zn.target.result)}}function Me(Xn){return Ie(function(Zn){var $n=Zn.target,Jn=$n.result,et=$n._hookCtx,nt=et&&et.onsuccess;nt&&nt(Jn),Xn&&Xn(Jn)},Xn)}function qe(Xn){return function(Zn){return Re(Zn),Xn(Zn.target.error),!1}}function Fe(Xn){return Ie(function(Zn){var $n=Zn.target,Jn=$n.error,et=$n._hookCtx,nt=et&&et.onerror;return nt&&nt(Jn),Re(Zn),Xn(Jn),!1})}function Re(Xn){Xn.stopPropagation&&Xn.stopPropagation(),Xn.preventDefault&&Xn.preventDefault()}function Ue(Xn){var Zn,$n=Oe.dependencies.localStorage;if(!$n)return Xn([]);try{Zn=JSON.parse($n.getItem("Dexie.DatabaseNames")||"[]")}catch(Jn){Zn=[]}Xn(Zn)&&$n.setItem("Dexie.DatabaseNames",JSON.stringify(Zn))}function Ve(Xn){function Zn(tt){return function(rt){var at=tt(rt),ot=at.value;return at.done?ot:ot&&"function"==typeof ot.then?ot.then(et,nt):Qe(ot)?ce.all(ot).then(et,nt):et(ot)}}var $n=function(tt){return Xn.next(tt)},et=Zn($n),nt=Zn(function(tt){return Xn.throw(tt)});return Zn($n)()}function Le(Xn,Zn,$n,Jn,et,nt,tt){this.name=Xn,this.keyPath=Zn,this.unique=$n,this.multi=Jn,this.auto=et,this.compound=nt,this.dotted=tt;var rt="string"==typeof Zn?Zn:Zn&&"["+[].join.call(Zn,"+")+"]";this.src=($n?"&":"")+(Jn?"*":"")+(et?"++":"")+rt}function ze(Xn,Zn,$n,Jn){this.name=Xn,this.primKey=Zn||new Le,this.indexes=$n||[new Le],this.instanceTemplate=Jn,this.mappedClass=null,this.idxByName=O($n,function(et){return[et.name,et]})}function We(Xn){return 1===Xn.length?Xn[0]:Xn}function He(Xn){var Zn=Xn&&(Xn.getDatabaseNames||Xn.webkitGetDatabaseNames);return Zn&&Zn.bind(Xn)}var Ge=Object.keys,Qe=Array.isArray,Ye="undefined"==typeof self?"undefined"==typeof window?h:window:self,Xe=Object.getPrototypeOf,Ze={}.hasOwnProperty,$e=Object.getOwnPropertyDescriptor,Je=[].slice,en="undefined"!=typeof Symbol&&Symbol.iterator,nn=en?function(Xn){var Zn;return null!=Xn&&(Zn=Xn[en])&&Zn.apply(Xn)}:function(){return null},tn={},rn=[].concat,an="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),on=function(){return!0},sn=!new Error("").stack,dn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],cn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","IncompatiblePromise"].concat(dn),un={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};D(ae).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+te(this._e,2))}},toString:function(){return this.name+": "+this.message}}),D(se).from(ae),D(ie).from(ae);var hn=cn.reduce(function(Xn,Zn){return Xn[Zn]=Zn+"Error",Xn},{}),mn=cn.reduce(function(Xn,Zn){function $n(et,nt){this._e=ne(),this.name=Jn,et?"string"==typeof et?(this.message=et,this.inner=nt||null):"object"==typeof et&&(this.message=et.name+" "+et.message,this.inner=et):(this.message=un[Zn]||Jn,this.inner=null)}var Jn=Zn+"Error";return D($n).from(ae),Xn[Zn]=$n,Xn},{});mn.Syntax=SyntaxError,mn.Type=TypeError,mn.Range=RangeError;var gn=dn.reduce(function(Xn,Zn){return Xn[Zn+"Error"]=mn[Zn],Xn},{}),bn=cn.reduce(function(Xn,Zn){return-1===["Syntax","Type","Range"].indexOf(Zn)&&(Xn[Zn+"Error"]=mn[Zn]),Xn},{});bn.ModifyError=se,bn.DexieError=ae,bn.BulkError=ie;var yn={},_n=100,kn=!1,xn=Ye.setImmediate?setImmediate.bind(null,_e):Ye.MutationObserver?function(){var Xn=document.createElement("div");new MutationObserver(function(){_e(),Xn=null}).observe(Xn,{attributes:!0}),Xn.setAttribute("i","1")}:function(){setTimeout(_e,0)},wn=function(Xn,Zn){Kn.push([Xn,Zn]),Dn&&(xn(),Dn=!1)},Pn=!0,Dn=!0,jn=[],Cn=[],In=null,An=H,Sn={global:!0,ref:0,unhandleds:[],onunhandled:Se,finalize:function(){this.unhandleds.forEach(function(Xn){try{Se(Xn[0],Xn[1])}catch(Zn){}})}},Kn=[],On=0,Nn=[];w(ce.prototype,{then:function(Xn,Zn){var $n=this,Jn=new ce(function(et,nt){me($n,new ue(Xn,Zn,et,nt))});return an&&(!this._prev||null===this._state)&&ye(Jn,this),Jn},_then:function(Xn,Zn){me(this,new ue(null,null,Xn,Zn))},catch:function(Xn){if(1===arguments.length)return this.then(null,Xn);var Zn=arguments[0],$n=arguments[1];return"function"==typeof Zn?this.then(null,function(Jn){return Jn instanceof Zn?$n(Jn):Ce(Jn)}):this.then(null,function(Jn){return Jn&&Jn.name===Zn?$n(Jn):Ce(Jn)})},finally:function(Xn){return this.then(function(Zn){return Xn(),Zn},function(Zn){return Xn(),Ce(Zn)})},uncaught:function(Xn){var Zn=this;return this.onuncatched=$(this.onuncatched,Xn),!1===this._state&&-1===jn.indexOf(this)&&jn.some(function($n,Jn,et){return $n._value===Zn._value&&(et[Jn]=Zn)}),this},stack:{get:function(){if(this._stack)return this._stack;try{kn=!0;var Xn=be(this,[],20),Zn=Xn.join("\nFrom previous: ");return null!==this._state&&(this._stack=Zn),Zn}finally{kn=!1}}}}),w(ce,{all:function(){var Xn=L.apply(null,arguments);return new ce(function(Zn,$n){0===Xn.length&&Zn([]);var Jn=Xn.length;Xn.forEach(function(et,nt){return ce.resolve(et).then(function(tt){Xn[nt]=tt,--Jn||Zn(Xn)},$n)})})},resolve:function(Xn){return Xn instanceof ce?Xn:Xn&&"function"==typeof Xn.then?new ce(function(Zn,$n){Xn.then(Zn,$n)}):new ce(yn,!0,Xn)},reject:Ce,race:function(){var Xn=L.apply(null,arguments);return new ce(function(Zn,$n){Xn.map(function(Jn){return ce.resolve(Jn).then(Zn,$n)})})},PSD:{get:function(){return Sn},set:function(Xn){return Sn=Xn}},newPSD:Ae,usePSD:Ee,scheduler:{get:function(){return wn},set:function(Xn){wn=Xn}},rejectionMapper:{get:function(){return An},set:function(Xn){An=Xn}},follow:function(Xn){return new ce(function(Zn,$n){return Ae(function(Jn,et){var nt=Sn;nt.unhandleds=[],nt.onunhandled=et,nt.finalize=Q(function(){var tt=this;we(function(){0===tt.unhandleds.length?Jn():et(tt.unhandleds[0])})},nt.finalize),Xn()},Zn,$n)})},on:de(null,{error:[$,function(Xn){console.warn("Unhandled rejection: "+(Xn.stack||Xn))}]})});var Tn=ce.on.error;Tn.subscribe=re("Promise.on('error')",Tn.subscribe),Tn.unsubscribe=re("Promise.on('error').unsubscribe",Tn.unsubscribe);var Bn="unhandledrejection";E(function(){wn=function(Xn,Zn){setTimeout(function(){Xn.apply(null,Zn)},0)}});var Mn="1.5.1",qn=String.fromCharCode(65535),Fn=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(Xn){return qn}}(),Rn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Un="String expected.",Vn=[],Ln="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),zn=Ln,Wn=Ln,Hn=function(Xn){return!/(dexie\.js|dexie\.min\.js)/.test(Xn)};ee(an,Hn);var Gn=function(){},Qn=!1,Yn=Ye.idbModules&&Ye.idbModules.shimIndexedDB?Ye.idbModules:{};return w(Oe,bn),w(Oe,{delete:function(Xn){var Zn=new Oe(Xn),$n=Zn.delete();return $n.onblocked=function(Jn){return Zn.on("blocked",Jn),this},$n},exists:function(Xn){return new Oe(Xn).open().then(function(Zn){return Zn.close(),!0}).catch(Oe.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(Xn){return new ce(function(Zn,$n){var Jn=He(indexedDB);if(Jn){var et=Jn();et.onsuccess=function(nt){Zn(I(nt.target.result,0))},et.onerror=qe($n)}else Ue(function(nt){return Zn(nt),!1})}).then(Xn)},defineClass:function(Xn){return function($n){$n?y(this,$n):Qn&&Te(this,Xn)}},applyStructure:Te,ignoreTransaction:function(Xn){return Sn.trans?Ee(Sn.transless,Xn):Xn()},vip:function(Xn){return Ae(function(){return Sn.letThrough=!0,Xn()})},async:function(Xn){return function(){try{var Zn=Ve(Xn.apply(this,arguments));return Zn&&"function"==typeof Zn.then?Zn:ce.resolve(Zn)}catch($n){return Ke($n)}}},spawn:function(Xn,Zn,$n){try{var Jn=Ve(Xn.apply($n,Zn||[]));return Jn&&"function"==typeof Jn.then?Jn:ce.resolve(Jn)}catch(et){return Ke(et)}},currentTransaction:{get:function(){return Sn.trans||null}},Promise:ce,debug:{get:function(){return an},set:function(Xn){ee(Xn,"dexie"===Xn?function(){return!0}:Hn)}},derive:D,extend:y,props:w,override:A,Events:de,events:{get:re(function(){return de})},getByKeyPath:M,setByKeyPath:q,delByKeyPath:function(Xn,Zn){"string"==typeof Zn?q(Xn,Zn,void 0):"length"in Zn&&[].map.call(Zn,function($n){q(Xn,$n,void 0)})},shallowClone:R,deepClone:U,getObjectDiff:V,asap:K,maxKey:Fn,addons:[],connections:Vn,MultiModifyError:mn.Modify,errnames:hn,IndexSpec:Le,TableSchema:ze,dependencies:{indexedDB:Yn.shimIndexedDB||Ye.indexedDB||Ye.mozIndexedDB||Ye.webkitIndexedDB||Ye.msIndexedDB,IDBKeyRange:Yn.IDBKeyRange||Ye.IDBKeyRange||Ye.webkitIDBKeyRange},semVer:Mn,version:Mn.split(".").map(function(Xn){return parseInt(Xn)}).reduce(function(Xn,Zn,$n){return Xn+Zn/Math.pow(10,2*$n)}),fakeAutoComplete:Gn,default:Oe}),B(function(){Oe.dependencies.localStorage=null==("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?Ye.localStorage:null}),ce.rejectionMapper=function(Xn,Zn){if(!Xn||Xn instanceof ae||Xn instanceof TypeError||Xn instanceof SyntaxError||!Xn.name||!gn[Xn.name])return Xn;var $n=new gn[Xn.name](Zn||Xn.message,Xn);return"stack"in Xn&&P($n,"stack",{get:function(){return this.inner.stack}}),$n},E(function(){Oe.fakeAutoComplete=Gn=E,Oe.fake=Qn=!0}),Oe})});

