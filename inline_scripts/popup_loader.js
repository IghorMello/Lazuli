(function(d){function c(b){if(y[b])return y[b].exports;var h=y[b]={i:b,l:!1,exports:{}};return d[b].call(h.exports,h,h.exports,c),h.l=!0,h.exports}var y={};return c.m=d,c.c=y,c.i=function(b){return b},c.d=function(b,h,m){c.o(b,h)||Object.defineProperty(b,h,{configurable:!1,enumerable:!0,get:m})},c.n=function(b){var h=b&&b.__esModule?function(){return b['default']}:function(){return b};return c.d(h,'a',h),h},c.o=function(b,h){return Object.prototype.hasOwnProperty.call(b,h)},c.p='',c(c.s=741)})({21:function(module,exports,__webpack_require__){var localforage,ref$,gexport,gexport_module,localforage_store,get_store,localforage_store_remote,get_store_remote,clear_cache_localget,clear_cache_remoteget,localget,localget_json,localget_base64,remoteget,remoteget_json,remoteget_base64,out$='undefined'!=typeof exports&&exports||this;localforage=__webpack_require__(81),ref$=__webpack_require__(4),gexport=ref$.gexport,gexport_module=ref$.gexport_module,localforage_store=null,get_store=function(){var d;return null==localforage_store&&(d=chrome.runtime.getManifest(),localforage_store=null!=d.update_url||'true'===localStorage.getItem('devmode_use_cache')?localforage.createInstance({name:'localget'}):{setItem:async function(){},getItem:async function(){}}),localforage_store},localforage_store_remote=null,get_store_remote=function(){return null==localforage_store_remote&&(localforage_store_remote=localforage.createInstance({name:'remoteget'})),localforage_store_remote},out$.clear_cache_localget=clear_cache_localget=async function(){var d;return d=get_store(),await d.clear()},out$.clear_cache_remoteget=clear_cache_remoteget=async function(){var d;return d=get_store_remote(),await d.clear()},out$.localget=localget=async function(d){var c,y,b;return(c=get_store(),y=await c.getItem(d),null!=y)?y:(b=await fetch(d),y=await b.text(),await c.setItem(d,y),y)},out$.localget_json=localget_json=async function(d){var c;return c=await localget(d),null==c?null:JSON.parse(c)},out$.localget_base64=localget_base64=async function(d){var c;return c=await localget(d),null==c?null:'data:text/plain;base64,'+btoa(unescape(encodeURIComponent(c)))},out$.remoteget=remoteget=async function(d){var c,y,b;return(c=get_store_remote(),y=await c.getItem(d),null!=y)?y:(b=await fetch(d),y=await b.text(),await c.setItem(d,y),y)},out$.remoteget_json=remoteget_json=async function(d){var c;return c=await remoteget(d),null==c?null:JSON.parse(c)},out$.remoteget_base64=remoteget_base64=async function(d){var c;return c=await remoteget(d),null==c?null:'data:text/plain;base64,'+btoa(unescape(encodeURIComponent(c)))},gexport_module('cacheget_utils',function(it){return eval(it)})},29:function(d){var y=function(){return this}();try{y=y||Function('return this')()||(1,eval)('this')}catch(b){'object'==typeof window&&(y=window)}d.exports=y},4:function(d,c){var y,b,h='undefined'!=typeof c&&c||this;h.gexport=y=function(m){var _,I;if(null==window.global_exports)return void console.log('calling gexport but global_exports is not defined');for(_ in m)I=m[_],window.global_exports[_]=I},h.gexport_module=b=function(m,_){if(null!=window.global_exports)return window.global_exports['eval_'+m]=_,null==window.global_exports.gexport_eval_funcs&&(window.global_exports.gexport_eval_funcs={}),window.global_exports.gexport_eval_funcs[m]=_}},564:function(module,exports,__webpack_require__){(function(){var{localget}=__webpack_require__(21);localget('popup.js').then(function(popup_js_contents){eval(popup_js_contents)})})()},741:function(d,c,y){d.exports=y(564)},81:function(d,c,y){(function(b){var h,h;(function(m){d.exports=m();var _})(function(){return function S(E,x,N){function R(D,C){if(!x[D]){if(!E[D]){if(!C&&'function'==typeof h&&h)return h(D,!0);if(O)return O(D,!0);var w=new Error('Cannot find module \''+D+'\'');throw w.code='MODULE_NOT_FOUND',w}var T=x[D]={exports:{}};E[D][0].call(T.exports,function(M){var F=E[D][1][M];return R(F?F:M)},T,T.exports,S,E,x,N)}return x[D].exports}for(var O='function'==typeof h&&h,A=0;A<N.length;A++)R(N[A]);return R}({1:[function(S,E,x){'use strict';function N(){}function R(U){if('function'!=typeof U)throw new TypeError('resolver must be a function');this.state=W,this.queue=[],this.outcome=void 0,U!==N&&C(this,U)}function O(U,Q,G){this.promise=U,'function'==typeof Q&&(this.onFulfilled=Q,this.callFulfilled=this.otherCallFulfilled),'function'==typeof G&&(this.onRejected=G,this.callRejected=this.otherCallRejected)}function A(U,Q,G){B(function(){var X;try{X=Q(G)}catch(H){return P.reject(U,H)}X===U?P.reject(U,new TypeError('Cannot resolve promise with itself')):P.resolve(U,X)})}function D(U){var Q=U&&U.then;if(U&&'object'==typeof U&&'function'==typeof Q)return function(){Q.apply(U,arguments)}}function C(U,Q){function G(Y){V||(V=!0,P.reject(U,Y))}function X(Y){V||(V=!0,P.resolve(U,Y))}var V=!1,J=L(function(){Q(X,G)});'error'===J.status&&G(J.value)}function L(U,Q){var G={};try{G.value=U(Q),G.status='success'}catch(X){G.status='error',G.value=X}return G}var B=S(2),P={},z=['REJECTED'],q=['FULFILLED'],W=['PENDING'];E.exports=x=R,R.prototype['catch']=function(U){return this.then(null,U)},R.prototype.then=function(U,Q){if('function'!=typeof U&&this.state===q||'function'!=typeof Q&&this.state===z)return this;var G=new this.constructor(N);if(this.state!==W){var X=this.state===q?U:Q;A(G,X,this.outcome)}else this.queue.push(new O(G,U,Q));return G},O.prototype.callFulfilled=function(U){P.resolve(this.promise,U)},O.prototype.otherCallFulfilled=function(U){A(this.promise,this.onFulfilled,U)},O.prototype.callRejected=function(U){P.reject(this.promise,U)},O.prototype.otherCallRejected=function(U){A(this.promise,this.onRejected,U)},P.resolve=function(U,Q){var G=L(D,Q);if('error'===G.status)return P.reject(U,G.value);var X=G.value;if(X)C(U,X);else{U.state=q,U.outcome=Q;for(var H=-1,V=U.queue.length;++H<V;)U.queue[H].callFulfilled(Q)}return U},P.reject=function(U,Q){U.state=z,U.outcome=Q;for(var G=-1,X=U.queue.length;++G<X;)U.queue[G].callRejected(Q);return U},x.resolve=function(U){return U instanceof this?U:P.resolve(new this(N),U)},x.reject=function(U){var Q=new this(N);return P.reject(Q,U)},x.all=function(U){function Q(Z,$){G.resolve(Z).then(function(te){V[$]=te,++J!==X||H||(H=!0,P.resolve(K,V))},function(te){H||(H=!0,P.reject(K,te))})}var G=this;if('[object Array]'!==Object.prototype.toString.call(U))return this.reject(new TypeError('must be an array'));var X=U.length,H=!1;if(!X)return this.resolve([]);for(var V=Array(X),J=0,Y=-1,K=new this(N);++Y<X;)Q(U[Y],Y);return K},x.race=function(U){function Q(Y){G.resolve(Y).then(function(K){H||(H=!0,P.resolve(J,K))},function(K){H||(H=!0,P.reject(J,K))})}var G=this;if('[object Array]'!==Object.prototype.toString.call(U))return this.reject(new TypeError('must be an array'));var X=U.length,H=!1;if(!X)return this.resolve([]);for(var V=-1,J=new this(N);++V<X;)Q(U[V]);return J}},{2:2}],2:[function(S,E){(function(N){'use strict';function R(){M=!0;for(var B,P,z=F.length;z;){for(P=F,F=[],B=-1;++B<z;)P[B]();z=F.length}M=!1}var A=N.MutationObserver||N.WebKitMutationObserver,D;if(A){var C=0,L=new A(R),w=N.document.createTextNode('');L.observe(w,{characterData:!0}),D=function(){w.data=C=++C%2}}else if(!N.setImmediate&&'undefined'!=typeof N.MessageChannel){var T=new N.MessageChannel;T.port1.onmessage=R,D=function(){T.port2.postMessage(0)}}else D='document'in N&&'onreadystatechange'in N.document.createElement('script')?function(){var B=N.document.createElement('script');B.onreadystatechange=function(){R(),B.onreadystatechange=null,B.parentNode.removeChild(B),B=null},N.document.documentElement.appendChild(B)}:function(){setTimeout(R,0)};var M,F=[];E.exports=function(B){1!==F.push(B)||M||D()}}).call(this,'undefined'==typeof b?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:b)},{}],3:[function(S){(function(N){'use strict';'function'!=typeof N.Promise&&(N.Promise=S(1))}).call(this,'undefined'==typeof b?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:b)},{1:1}],4:[function(S,E){'use strict';function N(pt,gt){if(!(pt instanceof gt))throw new TypeError('Cannot call a class as a function')}function C(pt,gt){pt=pt||[],gt=gt||{};try{return new Blob(pt,gt)}catch(mt){if('TypeError'!==mt.name)throw mt;for(var yt='undefined'==typeof BlobBuilder?'undefined'==typeof MSBlobBuilder?'undefined'==typeof MozBlobBuilder?WebKitBlobBuilder:MozBlobBuilder:MSBlobBuilder:BlobBuilder,bt=new yt,ht=0;ht<pt.length;ht+=1)bt.append(pt[ht]);return bt.getBlob(gt.type)}}function L(pt,gt){gt&&pt.then(function(yt){gt(null,yt)},function(yt){gt(yt)})}function w(pt,gt,yt){'function'==typeof gt&&pt.then(gt),'function'==typeof yt&&pt['catch'](yt)}function T(pt){for(var gt=pt.length,yt=new ArrayBuffer(gt),bt=new Uint8Array(yt),ht=0;ht<gt;ht++)bt[ht]=pt.charCodeAt(ht);return yt}function M(pt){return new Ae(function(gt){var yt=C(['']);pt.objectStore(De).put(yt,'key'),pt.onabort=function(bt){bt.preventDefault(),bt.stopPropagation(),gt(!1)},pt.oncomplete=function(){var bt=navigator.userAgent.match(/Chrome\/(\d+)/),ht=navigator.userAgent.match(/Edge\//);gt(ht||!bt||43<=parseInt(bt[1],10))}})['catch'](function(){return!1})}function F(pt){return'boolean'==typeof Ce?Ae.resolve(Ce):M(pt).then(function(gt){return Ce=gt,Ce})}function B(pt){var gt=Le[pt.name],yt={};yt.promise=new Ae(function(bt){yt.resolve=bt}),gt.deferredOperations.push(yt),gt.dbReady=gt.dbReady?gt.dbReady.then(function(){return yt.promise}):yt.promise}function P(pt){var gt=Le[pt.name],yt=gt.deferredOperations.pop();yt&&yt.resolve()}function z(pt,gt){return new Ae(function(yt,bt){if(pt.db)if(gt)B(pt),pt.db.close();else return yt(pt.db);var ht=[pt.name];gt&&ht.push(pt.version);var mt=Oe.open.apply(Oe,ht);gt&&(mt.onupgradeneeded=function(_t){var vt=mt.result;try{vt.createObjectStore(pt.storeName),1>=_t.oldVersion&&vt.createObjectStore(De)}catch(It){if('ConstraintError'===It.name)console.warn('The database "'+pt.name+'" has been upgraded from version '+_t.oldVersion+' to version '+_t.newVersion+', but the storage "'+pt.storeName+'" already exists.');else throw It}}),mt.onerror=function(){bt(mt.error)},mt.onsuccess=function(){yt(mt.result),P(pt)}})}function q(pt){return z(pt,!1)}function W(pt){return z(pt,!0)}function U(pt,gt){if(!pt.db)return!0;var yt=!pt.db.objectStoreNames.contains(pt.storeName),bt=pt.version<pt.db.version,ht=pt.version>pt.db.version;if(bt&&(pt.version!==gt&&console.warn('The database "'+pt.name+'" can\'t be downgraded from version '+pt.db.version+' to version '+pt.version+'.'),pt.version=pt.db.version),ht||yt){if(yt){var mt=pt.db.version+1;mt>pt.version&&(pt.version=mt)}return!0}return!1}function Q(pt){return new Ae(function(gt,yt){var bt=new FileReader;bt.onerror=yt,bt.onloadend=function(ht){var mt=btoa(ht.target.result||'');gt({__local_forage_encoded_blob:!0,data:mt,type:pt.type})},bt.readAsBinaryString(pt)})}function G(pt){var gt=T(atob(pt.data));return C([gt],{type:pt.type})}function X(pt){return pt&&pt.__local_forage_encoded_blob}function H(pt){var gt=this,yt=gt._initReady().then(function(){var bt=Le[gt._dbInfo.name];if(bt&&bt.dbReady)return bt.dbReady});return w(yt,pt,pt),yt}function ne(pt){var gt=0.75*pt.length,yt=pt.length,bt,ht=0,mt,_t,vt,It;'='===pt[pt.length-1]&&(gt--,'='===pt[pt.length-2]&&gt--);var St=new ArrayBuffer(gt),Et=new Uint8Array(St);for(bt=0;bt<yt;bt+=4)mt=Me.indexOf(pt[bt]),_t=Me.indexOf(pt[bt+1]),vt=Me.indexOf(pt[bt+2]),It=Me.indexOf(pt[bt+3]),Et[ht++]=mt<<2|_t>>4,Et[ht++]=(15&_t)<<4|vt>>2,Et[ht++]=(3&vt)<<6|63&It;return St}function oe(pt){var bt,gt=new Uint8Array(pt),yt='';for(bt=0;bt<gt.length;bt+=3)yt+=Me[gt[bt]>>2],yt+=Me[(3&gt[bt])<<4|gt[bt+1]>>4],yt+=Me[(15&gt[bt+1])<<2|gt[bt+2]>>6],yt+=Me[63&gt[bt+2]];return 2==gt.length%3?yt=yt.substring(0,yt.length-1)+'=':1==gt.length%3&&(yt=yt.substring(0,yt.length-2)+'=='),yt}function Ne(pt,gt){pt[gt]=function(){var yt=arguments;return pt.ready().then(function(){return pt[gt].apply(pt,yt)})}}function ke(){for(var gt,pt=1;pt<arguments.length;pt++)if(gt=arguments[pt],gt)for(var yt in gt)gt.hasOwnProperty(yt)&&(arguments[0][yt]=ut(gt[yt])?gt[yt].slice():gt[yt]);return arguments[0]}function je(pt){for(var gt in ot)if(ot.hasOwnProperty(gt)&&ot[gt]===pt)return!0;return!1}var Re='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(pt){return typeof pt}:function(pt){return pt&&'function'==typeof Symbol&&pt.constructor===Symbol&&pt!==Symbol.prototype?'symbol':typeof pt},Oe=function(){try{if('undefined'!=typeof indexedDB)return indexedDB;if('undefined'!=typeof webkitIndexedDB)return webkitIndexedDB;if('undefined'!=typeof mozIndexedDB)return mozIndexedDB;if('undefined'!=typeof OIndexedDB)return OIndexedDB;if('undefined'!=typeof msIndexedDB)return msIndexedDB}catch(pt){}}();'undefined'==typeof Promise&&'undefined'!=typeof S&&S(3);var Ae=Promise,De='local-forage-detect-blob-support',Ce,Le,we=Object.prototype.toString,Te={_driver:'asyncStorage',_initStorage:function(pt){function gt(){return Ae.resolve()}var yt=this,bt={db:null};if(pt)for(var ht in pt)bt[ht]=pt[ht];Le||(Le={});var mt=Le[bt.name];mt||(mt={forages:[],db:null,dbReady:null,deferredOperations:[]},Le[bt.name]=mt),mt.forages.push(yt),yt._initReady||(yt._initReady=yt.ready,yt.ready=H);for(var It,_t=[],vt=0;vt<mt.forages.length;vt++)It=mt.forages[vt],It!==yt&&_t.push(It._initReady()['catch'](gt));var St=mt.forages.slice(0);return Ae.all(_t).then(function(){return bt.db=mt.db,q(bt)}).then(function(Et){return bt.db=Et,U(bt,yt._defaultConfig.version)?W(bt):Et}).then(function(Et){bt.db=mt.db=Et,yt._dbInfo=bt;for(var Nt,xt=0;xt<St.length;xt++)Nt=St[xt],Nt!==yt&&(Nt._dbInfo.db=bt.db,Nt._dbInfo.version=bt.version)})},iterate:function(pt,gt){var yt=this,bt=new Ae(function(ht,mt){yt.ready().then(function(){var _t=yt._dbInfo,vt=_t.db.transaction(_t.storeName,'readonly').objectStore(_t.storeName),It=vt.openCursor(),St=1;It.onsuccess=function(){var Et=It.result;if(Et){var xt=Et.value;X(xt)&&(xt=G(xt));var Nt=pt(xt,Et.key,St++);void 0===Nt?Et['continue']():ht(Nt)}else ht()},It.onerror=function(){mt(It.error)}})['catch'](mt)});return L(bt,gt),bt},getItem:function(pt,gt){var yt=this;'string'!=typeof pt&&(console.warn(pt+' used as a key, but it is not a string.'),pt+='');var bt=new Ae(function(ht,mt){yt.ready().then(function(){var _t=yt._dbInfo,vt=_t.db.transaction(_t.storeName,'readonly').objectStore(_t.storeName),It=vt.get(pt);It.onsuccess=function(){var St=It.result;void 0===St&&(St=null),X(St)&&(St=G(St)),ht(St)},It.onerror=function(){mt(It.error)}})['catch'](mt)});return L(bt,gt),bt},setItem:function(pt,gt,yt){var bt=this;'string'!=typeof pt&&(console.warn(pt+' used as a key, but it is not a string.'),pt+='');var ht=new Ae(function(mt,_t){var vt;bt.ready().then(function(){return vt=bt._dbInfo,'[object Blob]'===we.call(gt)?F(vt.db).then(function(It){return It?gt:Q(gt)}):gt}).then(function(It){var St=vt.db.transaction(vt.storeName,'readwrite'),Et=St.objectStore(vt.storeName);null===It&&(It=void 0),St.oncomplete=function(){void 0===It&&(It=null),mt(It)},St.onabort=St.onerror=function(){var Nt=xt.error?xt.error:xt.transaction.error;_t(Nt)};var xt=Et.put(It,pt)})['catch'](_t)});return L(ht,yt),ht},removeItem:function(pt,gt){var yt=this;'string'!=typeof pt&&(console.warn(pt+' used as a key, but it is not a string.'),pt+='');var bt=new Ae(function(ht,mt){yt.ready().then(function(){var _t=yt._dbInfo,vt=_t.db.transaction(_t.storeName,'readwrite'),It=vt.objectStore(_t.storeName),St=It['delete'](pt);vt.oncomplete=function(){ht()},vt.onerror=function(){mt(St.error)},vt.onabort=function(){var Et=St.error?St.error:St.transaction.error;mt(Et)}})['catch'](mt)});return L(bt,gt),bt},clear:function(pt){var gt=this,yt=new Ae(function(bt,ht){gt.ready().then(function(){var mt=gt._dbInfo,_t=mt.db.transaction(mt.storeName,'readwrite'),vt=_t.objectStore(mt.storeName),It=vt.clear();_t.oncomplete=function(){bt()},_t.onabort=_t.onerror=function(){var St=It.error?It.error:It.transaction.error;ht(St)}})['catch'](ht)});return L(yt,pt),yt},length:function(pt){var gt=this,yt=new Ae(function(bt,ht){gt.ready().then(function(){var mt=gt._dbInfo,_t=mt.db.transaction(mt.storeName,'readonly').objectStore(mt.storeName),vt=_t.count();vt.onsuccess=function(){bt(vt.result)},vt.onerror=function(){ht(vt.error)}})['catch'](ht)});return L(yt,pt),yt},key:function(pt,gt){var yt=this,bt=new Ae(function(ht,mt){return 0>pt?void ht(null):void yt.ready().then(function(){var _t=yt._dbInfo,vt=_t.db.transaction(_t.storeName,'readonly').objectStore(_t.storeName),It=!1,St=vt.openCursor();St.onsuccess=function(){var Et=St.result;return Et?void(0===pt?ht(Et.key):It?ht(Et.key):(It=!0,Et.advance(pt))):void ht(null)},St.onerror=function(){mt(St.error)}})['catch'](mt)});return L(bt,gt),bt},keys:function(pt){var gt=this,yt=new Ae(function(bt,ht){gt.ready().then(function(){var mt=gt._dbInfo,_t=mt.db.transaction(mt.storeName,'readonly').objectStore(mt.storeName),vt=_t.openCursor(),It=[];vt.onsuccess=function(){var St=vt.result;return St?void(It.push(St.key),St['continue']()):void bt(It)},vt.onerror=function(){ht(vt.error)}})['catch'](ht)});return L(yt,pt),yt}},Me='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',Be=/^~~local_forage_type~([^~]+)~/,Pe='__lfsc__:',ze=Pe.length,qe='arbf',We='blob',Ue='si08',Qe='ui08',Ge='uic8',Xe='si16',He='si32',Ve='ur16',Je='ui32',Ye='fl32',Ke='fl64',Ze=ze+qe.length,$e=Object.prototype.toString,et={serialize:function(pt,gt){var yt='';if(pt&&(yt=$e.call(pt)),pt&&('[object ArrayBuffer]'==yt||pt.buffer&&'[object ArrayBuffer]'===$e.call(pt.buffer))){var bt,ht=Pe;pt instanceof ArrayBuffer?(bt=pt,ht+=qe):(bt=pt.buffer,'[object Int8Array]'==yt?ht+=Ue:'[object Uint8Array]'==yt?ht+=Qe:'[object Uint8ClampedArray]'==yt?ht+=Ge:'[object Int16Array]'==yt?ht+=Xe:'[object Uint16Array]'==yt?ht+=Ve:'[object Int32Array]'==yt?ht+=He:'[object Uint32Array]'==yt?ht+=Je:'[object Float32Array]'==yt?ht+=Ye:'[object Float64Array]'==yt?ht+=Ke:gt(new Error('Failed to get type for BinaryArray'))),gt(ht+oe(bt))}else if('[object Blob]'==yt){var mt=new FileReader;mt.onload=function(){var _t='~~local_forage_type~'+pt.type+'~'+oe(this.result);gt(Pe+We+_t)},mt.readAsArrayBuffer(pt)}else try{gt(JSON.stringify(pt))}catch(_t){console.error('Couldn\'t convert value into a JSON string: ',pt),gt(null,_t)}},deserialize:function(pt){if(pt.substring(0,ze)!==Pe)return JSON.parse(pt);var gt=pt.substring(Ze),yt=pt.substring(ze,Ze),bt;if(yt===We&&Be.test(gt)){var ht=gt.match(Be);bt=ht[1],gt=gt.substring(ht[0].length)}var mt=ne(gt);switch(yt){case qe:return mt;case We:return C([mt],{type:bt});case Ue:return new Int8Array(mt);case Qe:return new Uint8Array(mt);case Ge:return new Uint8ClampedArray(mt);case Xe:return new Int16Array(mt);case Ve:return new Uint16Array(mt);case He:return new Int32Array(mt);case Je:return new Uint32Array(mt);case Ye:return new Float32Array(mt);case Ke:return new Float64Array(mt);default:throw new Error('Unkown type: '+yt);}},stringToBuffer:ne,bufferToString:oe},tt={_driver:'webSQLStorage',_initStorage:function(pt){var gt=this,yt={db:null};if(pt)for(var bt in pt)yt[bt]='string'==typeof pt[bt]?pt[bt]:pt[bt].toString();var ht=new Ae(function(mt,_t){try{yt.db=openDatabase(yt.name,yt.version+'',yt.description,yt.size)}catch(vt){return _t(vt)}yt.db.transaction(function(vt){vt.executeSql('CREATE TABLE IF NOT EXISTS '+yt.storeName+' (id INTEGER PRIMARY KEY, key unique, value)',[],function(){gt._dbInfo=yt,mt()},function(It,St){_t(St)})})});return yt.serializer=et,ht},iterate:function(pt,gt){var yt=this,bt=new Ae(function(ht,mt){yt.ready().then(function(){var _t=yt._dbInfo;_t.db.transaction(function(vt){vt.executeSql('SELECT * FROM '+_t.storeName,[],function(It,St){for(var Et=St.rows,xt=Et.length,Nt=0;Nt<xt;Nt++){var kt=Et.item(Nt),jt=kt.value;if(jt&&(jt=_t.serializer.deserialize(jt)),jt=pt(jt,kt.key,Nt+1),void 0!==jt)return void ht(jt)}ht()},function(It,St){mt(St)})})})['catch'](mt)});return L(bt,gt),bt},getItem:function(pt,gt){var yt=this;'string'!=typeof pt&&(console.warn(pt+' used as a key, but it is not a string.'),pt+='');var bt=new Ae(function(ht,mt){yt.ready().then(function(){var _t=yt._dbInfo;_t.db.transaction(function(vt){vt.executeSql('SELECT * FROM '+_t.storeName+' WHERE key = ? LIMIT 1',[pt],function(It,St){var Et=St.rows.length?St.rows.item(0).value:null;Et&&(Et=_t.serializer.deserialize(Et)),ht(Et)},function(It,St){mt(St)})})})['catch'](mt)});return L(bt,gt),bt},setItem:function(pt,gt,yt){var bt=this;'string'!=typeof pt&&(console.warn(pt+' used as a key, but it is not a string.'),pt+='');var ht=new Ae(function(mt,_t){bt.ready().then(function(){void 0===gt&&(gt=null);var vt=gt,It=bt._dbInfo;It.serializer.serialize(gt,function(St,Et){Et?_t(Et):It.db.transaction(function(xt){xt.executeSql('INSERT OR REPLACE INTO '+It.storeName+' (key, value) VALUES (?, ?)',[pt,St],function(){mt(vt)},function(Nt,kt){_t(kt)})},function(xt){xt.code===xt.QUOTA_ERR&&_t(xt)})})})['catch'](_t)});return L(ht,yt),ht},removeItem:function(pt,gt){var yt=this;'string'!=typeof pt&&(console.warn(pt+' used as a key, but it is not a string.'),pt+='');var bt=new Ae(function(ht,mt){yt.ready().then(function(){var _t=yt._dbInfo;_t.db.transaction(function(vt){vt.executeSql('DELETE FROM '+_t.storeName+' WHERE key = ?',[pt],function(){ht()},function(It,St){mt(St)})})})['catch'](mt)});return L(bt,gt),bt},clear:function(pt){var gt=this,yt=new Ae(function(bt,ht){gt.ready().then(function(){var mt=gt._dbInfo;mt.db.transaction(function(_t){_t.executeSql('DELETE FROM '+mt.storeName,[],function(){bt()},function(vt,It){ht(It)})})})['catch'](ht)});return L(yt,pt),yt},length:function(pt){var gt=this,yt=new Ae(function(bt,ht){gt.ready().then(function(){var mt=gt._dbInfo;mt.db.transaction(function(_t){_t.executeSql('SELECT COUNT(key) as c FROM '+mt.storeName,[],function(vt,It){var St=It.rows.item(0).c;bt(St)},function(vt,It){ht(It)})})})['catch'](ht)});return L(yt,pt),yt},key:function(pt,gt){var yt=this,bt=new Ae(function(ht,mt){yt.ready().then(function(){var _t=yt._dbInfo;_t.db.transaction(function(vt){vt.executeSql('SELECT key FROM '+_t.storeName+' WHERE id = ? LIMIT 1',[pt+1],function(It,St){var Et=St.rows.length?St.rows.item(0).key:null;ht(Et)},function(It,St){mt(St)})})})['catch'](mt)});return L(bt,gt),bt},keys:function(pt){var gt=this,yt=new Ae(function(bt,ht){gt.ready().then(function(){var mt=gt._dbInfo;mt.db.transaction(function(_t){_t.executeSql('SELECT key FROM '+mt.storeName,[],function(vt,It){for(var St=[],Et=0;Et<It.rows.length;Et++)St.push(It.rows.item(Et).key);bt(St)},function(vt,It){ht(It)})})})['catch'](ht)});return L(yt,pt),yt}},rt={_driver:'localStorageWrapper',_initStorage:function(pt){var gt=this,yt={};if(pt)for(var bt in pt)yt[bt]=pt[bt];return yt.keyPrefix=yt.name+'/',yt.storeName!==gt._defaultConfig.storeName&&(yt.keyPrefix+=yt.storeName+'/'),gt._dbInfo=yt,yt.serializer=et,Ae.resolve()},iterate:function(pt,gt){var yt=this,bt=yt.ready().then(function(){for(var Et,ht=yt._dbInfo,mt=ht.keyPrefix,_t=mt.length,vt=localStorage.length,It=1,St=0;St<vt;St++)if(Et=localStorage.key(St),0===Et.indexOf(mt)){var xt=localStorage.getItem(Et);if(xt&&(xt=ht.serializer.deserialize(xt)),xt=pt(xt,Et.substring(_t),It++),void 0!==xt)return xt}});return L(bt,gt),bt},getItem:function(pt,gt){var yt=this;'string'!=typeof pt&&(console.warn(pt+' used as a key, but it is not a string.'),pt+='');var bt=yt.ready().then(function(){var ht=yt._dbInfo,mt=localStorage.getItem(ht.keyPrefix+pt);return mt&&(mt=ht.serializer.deserialize(mt)),mt});return L(bt,gt),bt},setItem:function(pt,gt,yt){var bt=this;'string'!=typeof pt&&(console.warn(pt+' used as a key, but it is not a string.'),pt+='');var ht=bt.ready().then(function(){void 0===gt&&(gt=null);var mt=gt;return new Ae(function(_t,vt){var It=bt._dbInfo;It.serializer.serialize(gt,function(St,Et){if(Et)vt(Et);else try{localStorage.setItem(It.keyPrefix+pt,St),_t(mt)}catch(xt){('QuotaExceededError'===xt.name||'NS_ERROR_DOM_QUOTA_REACHED'===xt.name)&&vt(xt),vt(xt)}})})});return L(ht,yt),ht},removeItem:function(pt,gt){var yt=this;'string'!=typeof pt&&(console.warn(pt+' used as a key, but it is not a string.'),pt+='');var bt=yt.ready().then(function(){var ht=yt._dbInfo;localStorage.removeItem(ht.keyPrefix+pt)});return L(bt,gt),bt},clear:function(pt){var gt=this,yt=gt.ready().then(function(){for(var mt,bt=gt._dbInfo.keyPrefix,ht=localStorage.length-1;0<=ht;ht--)mt=localStorage.key(ht),0===mt.indexOf(bt)&&localStorage.removeItem(mt)});return L(yt,pt),yt},length:function(pt){var gt=this,yt=gt.keys().then(function(bt){return bt.length});return L(yt,pt),yt},key:function(pt,gt){var yt=this,bt=yt.ready().then(function(){var mt,ht=yt._dbInfo;try{mt=localStorage.key(pt)}catch(_t){mt=null}return mt&&(mt=mt.substring(ht.keyPrefix.length)),mt});return L(bt,gt),bt},keys:function(pt){var gt=this,yt=gt.ready().then(function(){for(var bt=gt._dbInfo,ht=localStorage.length,mt=[],_t=0;_t<ht;_t++)0===localStorage.key(_t).indexOf(bt.keyPrefix)&&mt.push(localStorage.key(_t).substring(bt.keyPrefix.length));return mt});return L(yt,pt),yt}},nt={},ot={INDEXEDDB:'asyncStorage',LOCALSTORAGE:'localStorageWrapper',WEBSQL:'webSQLStorage'},at=[ot.INDEXEDDB,ot.WEBSQL,ot.LOCALSTORAGE],dt=['clear','getItem','iterate','key','keys','length','removeItem','setItem'],st={description:'',driver:at.slice(),name:'localforage',size:4980736,storeName:'keyvaluepairs',version:1},lt={};lt[ot.INDEXEDDB]=function(){try{return!!Oe&&('undefined'!=typeof openDatabase&&'undefined'!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)?!1:Oe&&'function'==typeof Oe.open&&'undefined'!=typeof IDBKeyRange)}catch(pt){return!1}}(),lt[ot.WEBSQL]=function(){return'function'==typeof openDatabase}(),lt[ot.LOCALSTORAGE]=function(){try{return'undefined'!=typeof localStorage&&'setItem'in localStorage&&localStorage.setItem}catch(pt){return!1}}();var ut=Array.isArray||function(pt){return'[object Array]'===Object.prototype.toString.call(pt)},ct=function(){function pt(gt){N(this,pt),this.INDEXEDDB=ot.INDEXEDDB,this.LOCALSTORAGE=ot.LOCALSTORAGE,this.WEBSQL=ot.WEBSQL,this._defaultConfig=ke({},st),this._config=ke({},this._defaultConfig,gt),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return pt.prototype.config=function(yt){if('object'===('undefined'==typeof yt?'undefined':Re(yt))){if(this._ready)return new Error('Can\'t call config() after localforage has been used.');for(var bt in yt)'storeName'==bt&&(yt[bt]=yt[bt].replace(/\W/g,'_')),this._config[bt]=yt[bt];return'driver'in yt&&yt.driver&&this.setDriver(this._config.driver),!0}return'string'==typeof yt?this._config[yt]:this._config},pt.prototype.defineDriver=function(yt,bt,ht){var mt=new Ae(function(_t,vt){try{var It=yt._driver,St=new Error('Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver'),Et=new Error('Custom driver name already in use: '+yt._driver);if(!yt._driver)return void vt(St);if(je(yt._driver))return void vt(Et);for(var kt,xt=dt.concat('_initStorage'),Nt=0;Nt<xt.length;Nt++)if(kt=xt[Nt],!kt||!yt[kt]||'function'!=typeof yt[kt])return void vt(St);var jt=Ae.resolve(!0);'_support'in yt&&(yt._support&&'function'==typeof yt._support?jt=yt._support():jt=Ae.resolve(!!yt._support)),jt.then(function(Rt){lt[It]=Rt,nt[It]=yt,_t()},vt)}catch(Rt){vt(Rt)}});return w(mt,bt,ht),mt},pt.prototype.driver=function(){return this._driver||null},pt.prototype.getDriver=function(yt,bt,ht){var mt=this,_t=Ae.resolve().then(function(){if(je(yt))switch(yt){case mt.INDEXEDDB:return Te;case mt.LOCALSTORAGE:return rt;case mt.WEBSQL:return tt;}else{if(nt[yt])return nt[yt];throw new Error('Driver not found.')}});return w(_t,bt,ht),_t},pt.prototype.getSerializer=function(yt){var bt=Ae.resolve(et);return w(bt,yt),bt},pt.prototype.ready=function(yt){var bt=this,ht=bt._driverSet.then(function(){return null===bt._ready&&(bt._ready=bt._initDriver()),bt._ready});return w(ht,yt,yt),ht},pt.prototype.setDriver=function(yt,bt,ht){function mt(){vt._config.driver=vt.driver()}function _t(Et){return function(){function xt(){for(;Nt<Et.length;){var kt=Et[Nt];return Nt++,vt._dbInfo=null,vt._ready=null,vt.getDriver(kt).then(function(Rt){return vt._extend(Rt),mt(),vt._ready=vt._initStorage(vt._config),vt._ready})['catch'](xt)}mt();var jt=new Error('No available storage method found.');return vt._driverSet=Ae.reject(jt),vt._driverSet}var Nt=0;return xt()}}var vt=this;ut(yt)||(yt=[yt]);var It=this._getSupportedDrivers(yt),St=null===this._driverSet?Ae.resolve():this._driverSet['catch'](function(){return Ae.resolve()});return this._driverSet=St.then(function(){var Et=It[0];return vt._dbInfo=null,vt._ready=null,vt.getDriver(Et).then(function(xt){vt._driver=xt._driver,mt(),vt._wrapLibraryMethodsWithReady(),vt._initDriver=_t(It)})})['catch'](function(){mt();var Et=new Error('No available storage method found.');return vt._driverSet=Ae.reject(Et),vt._driverSet}),w(this._driverSet,bt,ht),this._driverSet},pt.prototype.supports=function(yt){return!!lt[yt]},pt.prototype._extend=function(yt){ke(this,yt)},pt.prototype._getSupportedDrivers=function(yt){for(var _t,bt=[],ht=0,mt=yt.length;ht<mt;ht++)_t=yt[ht],this.supports(_t)&&bt.push(_t);return bt},pt.prototype._wrapLibraryMethodsWithReady=function(){for(var yt=0;yt<dt.length;yt++)Ne(this,dt[yt])},pt.prototype.createInstance=function(yt){return new pt(yt)},pt}(),ft=new ct;E.exports=ft},{3:3}]},{},[4])(4)})}).call(c,y(29))}});