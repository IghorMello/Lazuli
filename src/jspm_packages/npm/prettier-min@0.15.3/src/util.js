"use strict";var assert=require("assert"),types=require("ast-types"),n=types.namedTypes;function comparePos(a,b){return a.line-b.line||a.column-b.column}function expandLoc(a,b){0>locStart(b)-locStart(a)&&setLocStart(a,locStart(b)),0>locEnd(a)-locEnd(b)&&setLocEnd(a,locEnd(b))}function fixFaultyLocations(a,b){if(a.decorators)a.decorators.forEach(function(f){expandLoc(a,f)});else if(a.declaration&&isExportDeclaration(a)){var d=a.declaration.decorators;d&&d.forEach(function(f){expandLoc(a,f)})}else if(n.MethodDefinition&&n.MethodDefinition.check(a)||n.Property.check(a)&&(a.method||a.shorthand))n.FunctionExpression.check(a.value)&&(a.value.id=null);else if("ObjectTypeProperty"===a.type){var e=skipSpaces(b,locEnd(a),!0);!1!==e&&","===b.charAt(e)&&!1!==(e=skipSpaces(b,e-1,!0))&&setLocEnd(a,e)}}function isExportDeclaration(a){if(a)switch(a.type){case"ExportDeclaration":case"ExportDefaultDeclaration":case"ExportDefaultSpecifier":case"DeclareExportDeclaration":case"ExportNamedDeclaration":case"ExportAllDeclaration":return!0;}return!1}function getParentExportDeclaration(a){var b=a.getParentNode();return"declaration"===a.getName()&&isExportDeclaration(b)?b:null}function getLast(a){return 0<a.length?a[a.length-1]:null}function skip(a){return(b,d,e)=>{const f=e&&e.backwards;if(!1===d)return!1;const g=b.length;let h=d;for(;0<=h&&h<g;){const j=b.charAt(h);if(a instanceof RegExp){if(!a.test(j))return h;}else if(-1===a.indexOf(j))return h;f?h--:h++}return(-1===h||h===g)&&h}}const skipWhitespace=skip(/\s/),skipSpaces=skip(" \t"),skipToLineEnd=skip("; \t"),skipEverythingButNewLine=skip(/[^\r\n]/);function skipInlineComment(a,b){if(!1===b)return!1;if("/"===a.charAt(b)&&"*"===a.charAt(b+1))for(var d=b+2;d<a.length;++d)if("*"===a.charAt(d)&&"/"===a.charAt(d+1))return d+2;return b}function skipTrailingComment(a,b){return!1!==b&&("/"===a.charAt(b)&&"/"===a.charAt(b+1)?skipEverythingButNewLine(a,b):b)}function skipNewline(a,b,d){const e=d&&d.backwards;if(!1===b)return!1;if(e){if("\n"===a.charAt(b))return b-1;if("\r"===a.charAt(b-1)&&"\n"===a.charAt(b))return b-2}else{if("\n"===a.charAt(b))return b+1;if("\r"===a.charAt(b)&&"\n"===a.charAt(b+1))return b+2}return b}function hasNewline(a,b,d){d=d||{};const e=skipSpaces(a,d.backwards?b-1:b,d),f=skipNewline(a,e,d);return e!==f}function hasNewlineInRange(a,b,d){for(var e=b;e<d;++e)if("\n"===a.charAt(e))return!0;return!1}function isNextLineEmpty(a,b){let d=null,e=locEnd(b);for(e=skipToLineEnd(a,e);e!==d;)d=e,e=skipInlineComment(a,e),e=skipSpaces(a,e);return e=skipTrailingComment(a,e),e=skipNewline(a,e),hasNewline(a,e)}function hasSpaces(a,b,d){d=d||{};const e=skipSpaces(a,d.backwards?b-1:b,d);return e!==b}function locStart(a){return a.range?a.range[0]:a.start}function locEnd(a){return a.range?a.range[1]:a.end}function setLocStart(a,b){a.range?a.range[0]=b:a.start=b}function setLocEnd(a,b){a.range?a.range[1]=b:a.end=b}function htmlEscapeInsideDoubleQuote(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function htmlEscapeInsideAngleBracket(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;")}var PRECEDENCE={};[["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%","**"]].forEach(function(a,b){a.forEach(function(d){PRECEDENCE[d]=b})});function getPrecedence(a){return PRECEDENCE[a]}module.exports={comparePos,getPrecedence,fixFaultyLocations,isExportDeclaration,getParentExportDeclaration,getLast,skipWhitespace,skipSpaces,skipNewline,isNextLineEmpty,hasNewline,hasNewlineInRange,hasSpaces,locStart,locEnd,setLocStart,setLocEnd,htmlEscapeInsideDoubleQuote,htmlEscapeInsideAngleBracket};

